(this.webpackJsonpwherewolf=this.webpackJsonpwherewolf||[]).push([[0],{143:function(e,t,n){},144:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var a=n(30),r=n(34),i=n.n(r),o=(n(143),n(0)),c=(n(144),n(4)),l=n(1),s=n(2),j=Object(l.createContext)(c.option.none);function u(e){var t=e.basepath,n=e.children;return Object(s.jsx)(j.Provider,{value:c.option.some({basepath:t}),children:n})}var d=n(20),p=n(222),b=n(212),f=n(213),m=n(173),h=n(126),O=n(214),x=n(208),y=n(225),g=n(203),v=n(204),w=n(205),D=n(206),I=n(207);function C(e){return Object(s.jsxs)(y.a,{open:e.open,onClose:e.onCancel,children:[Object(s.jsx)(g.a,{children:e.title}),Object(s.jsx)(v.a,{children:Object(s.jsx)(w.a,{children:e.content})}),Object(s.jsxs)(D.a,{children:[Object(s.jsx)(I.a,{autoFocus:!0,onClick:e.onCancel,color:"primary",children:Object(s.jsx)(x.a,{id:e.cancelLabel?e.cancelLabel:"cancel"})}),Object(s.jsx)(I.a,{onClick:e.onConfirm,color:"primary",children:Object(s.jsx)(x.a,{id:e.confirmLabel?e.confirmLabel:"ok"})})]})]})}var k=n(44),S=n(12),N=n(23),W=n(97),A=n(75),F={primaryWolf:{id:"primaryWolf",aura:"dark",mystical:!1,faction:"wolf",fitness:100},secondaryWolf:{id:"secondaryWolf",aura:"dark",mystical:!1,faction:"wolf",fitness:75},youngWolf:{id:"youngWolf",aura:"dark",mystical:!1,faction:"wolf",fitness:50},traitor:{id:"traitor",aura:"light",mystical:!1,faction:"wolf",fitness:30},seer:{id:"seer",aura:"light",mystical:!0,faction:"village",fitness:100},wizard:{id:"wizard",aura:"light",mystical:!0,faction:"village",fitness:30},medium:{id:"medium",aura:"light",mystical:!0,faction:"village",fitness:30},witch:{id:"witch",aura:"light",mystical:!0,faction:"village",fitness:50},healer:{id:"healer",aura:"light",mystical:!0,faction:"village",fitness:40},farmer1:{id:"farmer1",aura:"light",mystical:!1,faction:"village",fitness:200},farmer2:{id:"farmer2",aura:"light",mystical:!1,faction:"village",fitness:200},innkeeper:{id:"innkeeper",aura:"light",mystical:!1,faction:"village",fitness:50},bard:{id:"bard",aura:"light",mystical:!1,faction:"village",fitness:50},monk:{id:"monk",aura:"light",mystical:!1,faction:"village",fitness:20},heremit:{id:"heremit",aura:"light",mystical:!1,faction:"village",fitness:20},priest:{id:"priest",aura:"light",mystical:!1,faction:"village",fitness:40},sinner:{id:"sinner",aura:"dark",mystical:!1,faction:"village",fitness:40},madman:{id:"madman",aura:"light",mystical:!1,faction:"general",fitness:20},jester:{id:"jester",aura:"light",mystical:!1,faction:"general",fitness:20}},R=N.h({primaryWolf:!0,secondaryWolf:!0,youngWolf:!0,traitor:!0,seer:!0,wizard:!0,medium:!0,witch:!0,healer:!0,farmer1:!0,farmer2:!0,innkeeper:!0,bard:!0,monk:!0,heremit:!0,priest:!0,sinner:!0,madman:!0,jester:!0}),P=N.h({light:!0,dark:!0}),E=Object(o.pipe)(F,c.record.toArray,c.array.map((function(e){return Object(d.a)(e,2)[1].faction})),c.array.uniq(S.Eq)),T=N.n({name:W.a}),M=N.n({player:T,roleId:R,alive:N.d}),B=N.h({showRole:!0,night:!0,nightRecapAndDiscussion:!0}),H=N.n({killedDuringNight:N.c(T),killedDuringDay:Object(A.a)(T),findAura:Object(A.a)(P)}),L=N.n({phase:B,playersData:N.c(M),nightNumber:N.j,healerUseHisAbility:N.d,farmerTurnedIntoWolves:N.c(T),lastTurn:Object(A.a)(H)});function z(e){for(var t,n,a=e.length,r=Object(k.a)(e);0!==a;)n=Math.floor(Math.random()*a),t=r[a-=1],r[a]=r[n],r[n]=t;return r}function _(e){return function(t){for(var n=0,a=Object(k.a)(t),r=function(){for(var t=n,r=Object(o.pipe)(a,c.array.reduceWithIndex(0,(function(n,a,r){return n>=t?a+e(r):a}))),i=Math.floor(Math.random()*r),l=0,s=n;s<a.length;s++)if((l+=e(a[s]))>i){var j=a[n];a[n]=a[s],a[s]=j}n+=1};n<a.length;)r();return a}}var G=["primaryWolf","secondaryWolf","youngWolf"],K=["seer","wizard"],q=["seer","wolves","wizard","medium","witch","healer"];var U=n(209);function V(e){var t=Object(l.useState)(0),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(o.pipe)(e.collection,c.array.lookup(a)),j=0===a,u=a===e.collection.length;return Object(s.jsxs)(p.a,{display:"flex",width:1,alignItems:"center",flexDirection:"column",children:[Object(s.jsx)(p.a,{mt:2,width:1,children:Object(o.pipe)(i,c.option.fold(Object(o.constant)(e.lastScreen),e.content))}),Object(s.jsx)(p.a,{mt:2,children:Object(s.jsxs)(U.a,{container:!0,spacing:2,children:[!j&&Object(s.jsx)(U.a,{item:!0,children:Object(s.jsx)(I.a,{variant:"contained",color:"primary",onClick:function(){return a>0?r(a-1):{}},children:Object(s.jsx)(x.a,{id:"prev"})})}),!u&&Object(s.jsx)(U.a,{item:!0,children:Object(s.jsx)(I.a,{variant:"contained",color:"primary",onClick:function(){return r(a+1)},children:Object(s.jsx)(x.a,{id:"next"})})}),u&&Object(s.jsx)(U.a,{item:!0,children:Object(s.jsx)(I.a,{variant:"contained",color:"primary",onClick:e.onProceed,children:Object(s.jsx)(x.a,{id:"start"})})})]})})]})}var J=n(227),Q=n(228);function X(e){return Object(s.jsx)(p.a,{display:"flex",width:1,flexDirection:"column",m:4,children:Object(s.jsx)(U.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:2,children:e.players.map((function(t){return Object(s.jsx)(U.a,{justifyContent:"center",alignItems:"center",container:!0,item:!0,xs:4,sm:3,md:2,lg:1,children:Object(s.jsx)(J.a,{label:t.name,avatar:Object(s.jsx)(Q.a,{children:t.name[0]}),clickable:!0,color:"primary",onClick:function(){return e.onSelected(t)},variant:"outlined"})},t.name)}))})})}var Y=n(118);function Z(){var e=Object(Y.a)().formatMessage;return{formatName:function(t){switch(t){case"primaryWolf":return e({id:"role.primaryWolf.name"});case"secondaryWolf":return e({id:"role.secondaryWolf.name"});case"youngWolf":return e({id:"role.youngWolf.name"});case"traitor":return e({id:"role.traitor.name"});case"seer":return e({id:"role.seer.name"});case"wizard":return e({id:"role.wizard.name"});case"medium":return e({id:"role.medium.name"});case"witch":return e({id:"role.witch.name"});case"healer":return e({id:"role.healer.name"});case"farmer1":case"farmer2":return e({id:"role.farmer.name"});case"innkeeper":return e({id:"role.innkeeper.name"});case"bard":return e({id:"role.bard.name"});case"monk":return e({id:"role.monk.name"});case"heremit":return e({id:"role.heremit.name"});case"priest":return e({id:"role.priest.name"});case"sinner":return e({id:"role.sinner.name"});case"madman":return e({id:"role.madman.name"});case"jester":return e({id:"role.jester.name"})}},formatDescription:function(t){switch(t){case"primaryWolf":return e({id:"role.primaryWolf.description"});case"secondaryWolf":return e({id:"role.secondaryWolf.description"});case"youngWolf":return e({id:"role.youngWolf.description"});case"traitor":return e({id:"role.traitor.description"});case"seer":return e({id:"role.seer.description"});case"wizard":return e({id:"role.wizard.description"});case"medium":return e({id:"role.medium.description"});case"witch":return e({id:"role.witch.description"});case"healer":return e({id:"role.healer.description"});case"farmer1":case"farmer2":return e({id:"role.farmer.description"});case"innkeeper":return e({id:"role.innkeeper.description"});case"bard":return e({id:"role.bard.description"});case"monk":return e({id:"role.monk.description"});case"heremit":return e({id:"role.heremit.description"});case"priest":return e({id:"role.priest.description"});case"sinner":return e({id:"role.sinner.description"});case"madman":return e({id:"role.madman.description"});case"jester":return e({id:"role.jester.description"})}}}}function $(e){var t=Object(l.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(l.useState)(c.option.none),j=Object(d.a)(i,2),u=j[0],b=j[1],f=Z().formatName;return Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",children:[Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:f("healer")})}),Object(o.pipe)(e.playersData,c.array.findFirst((function(e){return"healer"===e.roleId})),c.option.fold(Object(o.constant)(Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleNotPresent"})})),(function(t){return t.alive?Object(s.jsxs)(p.a,{display:"flex",width:1,alignItems:"center",flexDirection:"column",children:[Object(s.jsxs)(h.a,{variant:"h4",children:[Object(s.jsx)(x.a,{id:"role.healer.name"}),": ".concat(t.player.name)]}),Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.healer.action"})}),Object(s.jsx)(X,{players:Object(o.pipe)(e.playersDiedThisNight,c.array.filter((function(e){return e.name!==t.player.name}))),onSelected:function(e){b(c.option.some(e)),r(!0)}}),Object(o.pipe)(u,c.option.map((function(t){return Object(s.jsx)(C,{open:a,title:Object(s.jsx)(x.a,{id:"game.night.healer.confirmation.title"}),content:Object(s.jsx)(x.a,{id:"game.night.healer.confirmation.content",values:{name:t.name}}),onCancel:function(){b(c.option.none),r(!1)},onConfirm:function(){b(c.option.none),r(!1),e.onHealedByHealer(t)}})})),c.option.toNullable)]}):Object(s.jsx)(p.a,{display:"flex",width:1,flexDirection:"column",children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleDied"})})})})))]})}function ee(e){return Object(s.jsxs)(y.a,{open:e.open,onClose:e.onClose,children:[Object(s.jsx)(g.a,{children:Object(s.jsx)(x.a,{id:"showAuraDialog.title",values:{name:e.player.name}})}),Object(s.jsx)(v.a,{children:Object(s.jsx)(w.a,{children:Object(s.jsx)(x.a,{id:"dark"===e.aura?"dark":"light"})})}),Object(s.jsx)(D.a,{children:Object(s.jsx)(I.a,{autoFocus:!0,onClick:e.onClose,color:"primary",children:Object(s.jsx)(x.a,{id:"close"})})})]})}function te(e){var t=Object(l.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(l.useState)(c.option.none),j=Object(d.a)(i,2),u=j[0],b=j[1],f=Z().formatName;return Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",children:[Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:f("medium")})}),Object(o.pipe)(e.playersData,c.array.findFirst((function(e){return"medium"===e.roleId})),c.option.fold(Object(o.constant)(Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleNotPresent"})})),(function(t){return t.alive?Object(s.jsxs)(p.a,{display:"flex",width:1,alignItems:"center",flexDirection:"column",children:[Object(s.jsxs)(h.a,{variant:"h4",children:[Object(s.jsx)(x.a,{id:"role.medium.name"}),": ".concat(t.player.name)]}),Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.medium.action"})}),Object(s.jsx)(X,{players:Object(o.pipe)(e.playersData,c.array.filterMap((function(e){return"medium"===e.roleId||e.alive?c.option.none:c.option.some(e.player)}))),onSelected:function(e){b(c.option.some(e)),r(!0)}}),Object(o.pipe)(u,c.option.chain((function(t){return Object(o.pipe)(e.playersData,c.array.findFirstMap((function(e){return e.player.name===t.name?c.option.some({player:e.player,aura:F[e.roleId].aura}):c.option.none})))})),c.option.map((function(e){return Object(s.jsx)(ee,{open:a,player:e.player,aura:e.aura,onClose:function(){b(c.option.none),r(!1)}})})),c.option.toNullable)]}):Object(s.jsx)(p.a,{display:"flex",width:1,flexDirection:"column",children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleDied"})})})})))]})}function ne(e){var t=Object(l.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(l.useState)(c.option.none),j=Object(d.a)(i,2),u=j[0],b=j[1];return Object(s.jsx)(p.a,{display:"flex",width:1,flexDirection:"column",children:Object(o.pipe)(e.playersData,c.array.findFirst((function(e){return"seer"===e.roleId})),c.option.fold(Object(o.constant)(Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleNotPresent"})})),(function(t){return t.alive?Object(s.jsxs)(p.a,{display:"flex",width:1,alignItems:"center",flexDirection:"column",children:[Object(s.jsxs)(h.a,{variant:"h4",children:[Object(s.jsx)(x.a,{id:"role.seer.name"}),": ".concat(t.player.name)]}),Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.seer.action"})}),Object(s.jsx)(X,{players:Object(o.pipe)(e.playersData,c.array.filterMap((function(e){return"seer"!==e.roleId&&e.alive?c.option.some(e.player):c.option.none}))),onSelected:function(e){b(c.option.some(e)),r(!0)}}),Object(o.pipe)(u,c.option.chain((function(t){return Object(o.pipe)(e.playersData,c.array.findFirstMap((function(e){return e.player.name===t.name?c.option.some({player:e.player,aura:F[e.roleId].aura}):c.option.none})))})),c.option.map((function(t){return Object(s.jsx)(ee,{open:a,player:t.player,aura:t.aura,onClose:function(){b(c.option.none),r(!1),e.onSelectedAura(t.aura)}})})),c.option.toNullable)]}):Object(s.jsx)(p.a,{display:"flex",width:1,flexDirection:"column",children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleDied"})})})})))})}function ae(e){var t=Object(l.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(l.useState)(c.option.none),j=Object(d.a)(i,2),u=j[0],b=j[1],f=Z().formatName;return Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",children:[Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:f("witch")})}),Object(o.pipe)(e.playersData,c.array.findFirst((function(e){return"witch"===e.roleId})),c.option.fold(Object(o.constant)(Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleNotPresent"})})),(function(t){return t.alive?Object(s.jsxs)(p.a,{display:"flex",width:1,alignItems:"center",flexDirection:"column",children:[Object(s.jsxs)(h.a,{variant:"h4",children:[Object(s.jsx)(x.a,{id:"role.medium.name"}),": ".concat(t.player.name)]}),Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.healer.action"})}),Object(s.jsx)(X,{players:Object(o.pipe)(e.playersData,c.array.filterMap((function(e){return e.alive?c.option.some(e.player):c.option.none}))),onSelected:function(e){b(c.option.some(e)),r(!0)}}),Object(o.pipe)(u,c.option.map((function(t){return Object(s.jsx)(C,{open:a,title:Object(s.jsx)(x.a,{id:"game.night.healer.confirmation.title"}),content:Object(s.jsx)(x.a,{id:"game.night.healer.confirmation.content",values:{name:t.name}}),onCancel:function(){b(c.option.none),r(!1)},onConfirm:function(){b(c.option.none),r(!1),e.onProtectedByWitch(t)}})})),c.option.toNullable)]}):Object(s.jsx)(p.a,{display:"flex",width:1,flexDirection:"column",children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleDied"})})})})))]})}function re(e){return Object(s.jsxs)(y.a,{open:e.open,onClose:e.onClose,children:[Object(s.jsx)(g.a,{children:Object(s.jsx)(x.a,{id:e.mystical?"showMysticalDialog.mystical":"showMysticalDialog.nonMystical",values:{name:e.player.name}})}),Object(s.jsx)(D.a,{children:Object(s.jsx)(I.a,{autoFocus:!0,onClick:e.onClose,color:"primary",children:Object(s.jsx)(x.a,{id:"close"})})})]})}function ie(e){var t=Object(l.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(l.useState)(c.option.none),j=Object(d.a)(i,2),u=j[0],b=j[1],f=Z().formatName;return Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",children:[Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:f("wizard")})}),Object(o.pipe)(e.playersData,c.array.findFirst((function(e){return"wizard"===e.roleId})),c.option.fold(Object(o.constant)(Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleNotPresent"})})),(function(t){return t.alive?Object(s.jsxs)(p.a,{display:"flex",width:1,alignItems:"center",flexDirection:"column",children:[Object(s.jsxs)(h.a,{variant:"h4",children:[Object(s.jsx)(x.a,{id:"role.wizard.name"}),": ".concat(t.player.name)]}),Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.wizard.action"})}),Object(s.jsx)(X,{players:Object(o.pipe)(e.playersData,c.array.filterMap((function(e){return"wizard"!==e.roleId&&e.alive?c.option.some(e.player):c.option.none}))),onSelected:function(e){b(c.option.some(e)),r(!0)}}),Object(o.pipe)(u,c.option.chain((function(t){return Object(o.pipe)(e.playersData,c.array.findFirstMap((function(e){return e.player.name===t.name?c.option.some({player:e.player,mystical:F[e.roleId].mystical}):c.option.none})))})),c.option.map((function(e){return Object(s.jsx)(re,{open:a,player:e.player,mystical:e.mystical,onClose:function(){b(c.option.none),r(!1)}})})),c.option.toNullable)]}):Object(s.jsx)(p.a,{display:"flex",width:1,flexDirection:"column",children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleDied"})})})})))]})}function oe(e){var t=Object(l.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(l.useState)(c.option.none),j=Object(d.a)(i,2),u=j[0],b=j[1];return Object(s.jsx)(p.a,{display:"flex",width:1,flexDirection:"column",children:Object(o.pipe)(e.playersData,c.array.filter((function(e){return Object(o.pipe)(G,c.array.findFirst((function(t){return t===e.roleId})),c.option.isSome)&&e.alive})),c.nonEmptyArray.fromArray,c.option.fold(Object(o.constant)(Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.night.roleNotPresent"})})),(function(t){return Object(s.jsxs)(p.a,{display:"flex",width:1,alignItems:"center",flexDirection:"column",children:[Object(s.jsxs)(h.a,{variant:"h4",children:[Object(s.jsx)(x.a,{id:"faction.wolf"}),": ".concat(Object(o.pipe)(t,c.nonEmptyArray.map((function(e){return e.player.name}))).join(", "))]}),Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:(e.doubleTurn,"game.night.wolves.action")})}),Object(s.jsx)(X,{players:Object(o.pipe)(e.playersData,c.array.filterMap((function(e){return e.alive?c.option.some(e.player):c.option.none}))),onSelected:function(e){b(c.option.some(e)),r(!0)}}),Object(o.pipe)(u,c.option.map((function(t){return Object(s.jsx)(C,{open:a,title:Object(s.jsx)(x.a,{id:"game.night.wolves.confirmation.title"}),content:Object(s.jsx)(x.a,{id:"game.night.wolves.confirmation.content",values:{name:t.name}}),onCancel:function(){b(c.option.none),r(!1)},onConfirm:function(){b(c.option.none),r(!1),e.onAttackedByWolves(t)}})})),c.option.toNullable)]})})))})}function ce(e){var t=Object(l.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1];return Object(s.jsxs)(y.a,{open:!0,children:[Object(s.jsx)(g.a,{children:Object(s.jsx)(x.a,{id:"farmerDeadDialog.title",values:{name:e.player.name}})}),Object(s.jsx)(v.a,{children:a?Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",children:[Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"farmerDeadDialog.showWolves",values:{name:e.player.name}})}),Object(s.jsx)(I.a,{onClick:e.onWolf,color:"primary",children:Object(s.jsx)(x.a,{id:"close"})})]}):Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",children:[Object(s.jsx)(I.a,{onClick:e.onNormal,color:"primary",children:Object(s.jsx)(x.a,{id:"farmerDeadDialog.killButton"})}),Object(s.jsx)(I.a,{onClick:e.onHero,color:"primary",children:Object(s.jsx)(x.a,{id:"farmerDeadDialog.heroButton"})}),Object(s.jsx)(I.a,{onClick:function(){return r(!0)},color:"primary",children:Object(s.jsx)(x.a,{id:"farmerDeadDialog.wolfDescendant"})})]})})]})}function le(e){return Object(s.jsxs)(y.a,{open:!0,children:[Object(s.jsx)(g.a,{children:Object(s.jsx)(x.a,{id:"farmerDeadDialog.title",values:{name:e.player.name}})}),Object(s.jsx)(v.a,{children:Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",children:[Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"traitorDialog.showWolves",values:{name:e.player.name}})}),Object(s.jsx)(I.a,{onClick:e.onClose,color:"primary",children:Object(s.jsx)(x.a,{id:"close"})})]})})]})}function se(e){var t,n=Object(l.useState)([]),a=Object(d.a)(n,2),r=a[0],i=a[1],j=Object(l.useState)(c.option.none),u=Object(d.a)(j,2),b=u[0],f=u[1],m=Object(l.useState)(c.option.none),O=Object(d.a)(m,2),y=O[0],g=O[1],v=Object(l.useState)(c.option.none),w=Object(d.a)(v,2),D=w[0],I=w[1],C=Object(l.useState)(c.option.none),S=Object(d.a)(C,2),N=S[0],W=S[1],A=Object(l.useState)(!1),F=Object(d.a)(A,2),R=F[0],P=F[1];return Object(s.jsxs)(p.a,{display:"flex",width:1,alignItems:"center",flexDirection:"column",children:[Object(s.jsx)(p.a,{mt:2,children:Object(s.jsx)(h.a,{variant:"h5",children:Object(s.jsx)(x.a,{id:"game.night.title"})})}),Object(s.jsx)(p.a,{mt:2,width:1,children:Object(s.jsx)(V,{lastScreen:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.showRole.finish"})}),collection:1===e.nightNumber?K:q,content:(t={whenSeer:function(){return Object(s.jsx)(ne,{playersData:e.playersData,onSelectedAura:function(e){return f(c.option.some(e))}})},whenWolves:function(){return Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",children:[Object(s.jsx)(oe,{playersData:Object(o.pipe)(e.playersData,c.array.filter((function(e){return Object(o.pipe)(r,c.array.findFirst((function(t){return t.name===e.player.name})),c.option.isNone)}))),doubleTurn:e.wolvesDoubleAttack,onAttackedByWolves:function(t){var n=Object(o.pipe)(e.playersData,c.array.findFirst((function(e){return"heremit"===e.roleId})),c.option.chain((function(e){return t.name===e.player.name?c.option.some(e):c.option.none}))),a=Object(o.pipe)(e.playersData,c.array.findFirst((function(e){return"traitor"===e.roleId})),c.option.chain((function(e){return t.name===e.player.name?c.option.some(e):c.option.none}))),l=Object(o.pipe)(e.playersData,c.array.findFirst((function(e){return"farmer1"===e.roleId||"farmer2"===e.roleId})),c.option.chain((function(e){return t.name===e.player.name?c.option.some(e):c.option.none})));c.option.isNone(n)&&Object(o.pipe)(l,c.option.fold((function(){return Object(o.pipe)(a,c.option.fold((function(){return i([].concat(Object(k.a)(r),[t]))}),(function(e){return I(c.option.some(e.player))})))}),(function(e){return g(c.option.some(e.player))})))}}),Object(o.pipe)(y,c.option.fold(o.constNull,(function(t){return Object(s.jsx)(ce,{player:t,onHero:function(){var n=Object(o.pipe)(e.playersData,c.array.filter((function(e){return Object(o.pipe)(G,c.array.findFirst((function(t){return t===e.roleId})),c.option.isSome)&&e.alive})),c.array.sortBy([Object(o.pipe)(c.number.Ord,c.ord.contramap((function(e){return function(e){switch(e){case"primaryWolf":return 1;case"secondaryWolf":return 2;case"farmer1":case"farmer2":return 3;case"youngWolf":return 4;default:return 99}}(e.roleId)})))]),c.array.head);i([].concat(Object(k.a)(r),[t],Object(k.a)(Object(o.pipe)(n,c.option.fold(Object(o.constant)([]),(function(e){return[e.player]})))))),g(c.option.none)},onNormal:function(){i([].concat(Object(k.a)(r),[t])),g(c.option.none)},onWolf:function(){W(c.option.some(t)),g(c.option.none)}})}))),Object(o.pipe)(D,c.option.fold(o.constNull,(function(e){return Object(s.jsx)(le,{player:e,onClose:function(){return I(c.option.none)}})})))]})},whenWizard:function(){return Object(s.jsx)(ie,{playersData:e.playersData})},whenMedium:function(){return Object(s.jsx)(te,{playersData:e.playersData})},whenWitch:function(){return Object(s.jsx)(ae,{playersData:e.playersData,onProtectedByWitch:function(e){return i(Object(o.pipe)(r,c.array.filter((function(t){return t.name!==e.name}))))}})},whenHealer:function(){return Object(s.jsx)($,{playersData:e.playersData,playersDiedThisNight:r,onHealedByHealer:function(e){i(Object(o.pipe)(r,c.array.filter((function(t){return t.name!==e.name})))),P(!0)}})}},function(e){switch(e){case"seer":return t.whenSeer();case"wolves":return t.whenWolves();case"wizard":return t.whenWizard();case"medium":return t.whenMedium();case"witch":return t.whenWitch();case"healer":return t.whenHealer()}}),onProceed:function(){return e.onNightResult({killedPlayers:r,farmerIntoWolf:N,healerUseHisAbility:R,findAura:b})}})})]})}function je(e){return Object(s.jsxs)(p.a,{display:"flex",width:1,alignItems:"center",flexDirection:"column",children:[Object(s.jsx)(p.a,{mt:2,children:Object(s.jsx)(h.a,{variant:"h5",children:Object(s.jsx)(x.a,{id:"game.nightRecapAndDiscussion.title"})})}),Object(s.jsxs)(p.a,{mt:2,width:1,flexDirection:"column",children:[Object(s.jsx)(h.a,{variant:"h5",children:Object(s.jsx)(x.a,{id:"game.nightRecapAndDiscussion.playerKilled"})}),Object(o.pipe)(e.playerKilled,c.nonEmptyArray.fromArray,c.option.fold(Object(o.constant)(Object(s.jsx)(h.a,{variant:"h5",children:Object(s.jsx)(x.a,{id:"game.nightRecapAndDiscussion.noPlayerKilled"})})),(function(e){return Object(s.jsx)("span",{children:e.map((function(e){return e.name})).join(", ")})}))),e.newsFromInn&&Object(s.jsx)(h.a,{variant:"h5",children:Object(s.jsx)(x.a,{id:"game.nightRecapAndDiscussion.newsFromInn"})}),e.newsFromBard&&Object(s.jsx)(h.a,{variant:"h5",children:Object(s.jsx)(x.a,{id:"game.nightRecapAndDiscussion.newsFromBard"})})]}),Object(s.jsx)(I.a,{variant:"contained",color:"primary",onClick:e.onProceedWithVoting,children:Object(s.jsx)(x.a,{id:"start"})})]})}var ue=n(98);function de(e,t){return Object(o.pipe)(localStorage.getItem(e),c.option.fromNullable,c.option.chain(Object(o.flow)(c.json.parse,c.either.mapLeft((function(e){return console.error("Json parse error: ",e),e})),c.either.chainW(Object(o.flow)(t.decode,c.either.mapLeft((function(e){return console.error("Decoding error: ",Object(ue.failure)(e).join("\n")),e})))),c.option.fromEither)))}function pe(e,t,n){return Object(o.pipe)(n,t.encode,c.json.stringify,c.either.bimap((function(e){return console.error(e),e}),(function(t){return localStorage.setItem(e,t)})))}function be(e){var t=Object(l.useState)(Object(o.pipe)(de("players",N.c(T)),c.option.map((function(e){return Object(o.pipe)(e,c.array.map((function(e){return{player:e,selected:!1}})))})))),n=Object(d.a)(t,2),r=n[0],i=n[1],j=Object(o.pipe)(r,c.option.map((function(e){return Object(o.pipe)(e,c.array.filter((function(e){return e.selected}))).length})),c.option.getOrElse(Object(o.constant)(0)));return Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",m:4,children:[Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.players.playerNumber",values:{amount:j,minAmount:4}})}),Object(s.jsx)(p.a,{display:"flex",width:1,flexDirection:"column",m:4,children:Object(o.pipe)(r,c.option.fold(Object(o.constant)(Object(s.jsx)(h.a,{variant:"h3",children:Object(s.jsx)(x.a,{id:"game.players.noPlayersDefined"})})),(function(e){return Object(s.jsx)(U.a,{container:!0,justifyContent:"center",alignItems:"center",spacing:2,children:e.map((function(t){return Object(s.jsx)(U.a,{justifyContent:"center",alignItems:"center",container:!0,item:!0,xs:4,sm:3,md:2,lg:1,children:Object(s.jsx)(J.a,{label:t.player.name,avatar:Object(s.jsx)(Q.a,{children:t.player.name[0]}),clickable:!0,color:"primary",onClick:function(){return i(Object(o.pipe)(e,c.array.findIndex((function(e){return e.player.name===t.player.name})),c.option.chain((function(t){return Object(o.pipe)(e,c.array.modifyAt(t,(function(e){return Object(a.a)(Object(a.a)({},e),{},{selected:!e.selected})})))}))))},variant:t.selected?"default":"outlined"})},t.player.name)}))})})))}),Object(s.jsx)(I.a,{variant:"contained",color:"primary",onClick:function(){return e.onNext(Object(o.pipe)(r,c.option.map((function(e){return Object(o.pipe)(e,c.array.filterMap((function(e){return e.selected?c.option.some(e.player):c.option.none})))})),c.option.getOrElse(Object(o.constant)([]))))},disabled:j<4,children:Object(s.jsx)(x.a,{id:"next"})})]})}var fe=n(210),me=n(211),he=n(127);function Oe(e){return Object(s.jsx)(he.a,Object(a.a)(Object(a.a)({},e),{},{children:Object(s.jsx)("path",{d:"M12 1.5c-5.398 0-9.75 4.352-9.75 9.602v4.273a2.53 2.53 0 002.55 2.55c.45 0 1.2.223 1.2.825V21c0 .3.227.602.523.75 1.801.602 3.676.898 5.477.898 1.8 0 3.676-.296 5.477-.898.296-.074.523-.375.523-.75v-2.25c0-.602.75-.824 1.2-.824a2.53 2.53 0 002.55-2.551v-4.273c0-5.25-4.352-9.602-9.75-9.602zM9.227 16.273l-.903.153c-.148 0-.3.074-.523.074-.602 0-1.125-.227-1.653-.602a2.666 2.666 0 01-.898-1.949v-.148A2.53 2.53 0 017.8 11.25h.9c.823 0 1.5.375 2.027.977.449.597.671 1.421.449 2.171-.227.977-1.051 1.653-1.95 1.875zm3.824 1.653c-.074.074-.153.074-.301.074-.3 0-.523-.148-.676-.45L12 17.399l-.074.153c-.153.375-.602.523-.977.3-.375-.152-.523-.601-.3-.976l.75-1.5c.226-.523 1.05-.523 1.351 0l.75 1.5c.074.375-.074.824-.45 1.05zm5.699-3.977c0 .75-.375 1.5-.898 1.95a2.632 2.632 0 01-1.653.601c-.148 0-.3 0-.523-.074l-.903-.153c-.972-.222-1.722-.898-1.949-1.875-.222-.75 0-1.574.45-2.171.453-.602 1.203-.977 2.027-.977h.898a2.53 2.53 0 012.551 2.55zm0 0"})}))}function xe(e){return Object(s.jsx)(he.a,Object(a.a)(Object(a.a)({},e),{},{children:Object(s.jsxs)("g",{children:[Object(s.jsx)("path",{d:"M23.887 11.586c-.192-.316-4.742-7.75-11.887-7.75-7.145 0-11.695 7.434-11.887 7.75a.807.807 0 000 .828c.192.316 4.742 7.75 11.887 7.75 7.145 0 11.695-7.434 11.887-7.75a.807.807 0 000-.828zM12 18.559c-5.336 0-9.21-5.063-10.238-6.559C2.789 10.5 6.652 5.441 12 5.441c5.336 0 9.21 5.063 10.238 6.559-1.027 1.5-4.89 6.559-10.238 6.559zm0 0"}),Object(s.jsx)("path",{d:"M12 6.598A5.406 5.406 0 006.598 12 5.409 5.409 0 0012 17.402 5.411 5.411 0 0017.402 12 5.406 5.406 0 0012 6.598zm0 9.199A3.801 3.801 0 018.203 12c0-2.094 1.703-3.8 3.797-3.8a3.804 3.804 0 013.797 3.8A3.801 3.801 0 0112 15.797zm0 0"}),Object(s.jsx)("path",{d:"M12 9.93c-1.145 0-2.07.925-2.07 2.07 0 1.145.925 2.07 2.07 2.07 1.145 0 2.07-.925 2.07-2.07 0-1.145-.925-2.07-2.07-2.07zm0 0"})]})}))}function ye(e){var t=Z(),n=t.formatName,a=t.formatDescription;return Object(s.jsx)(fe.a,{children:Object(s.jsxs)(me.a,{children:[Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"row",children:[Object(s.jsx)(p.a,{display:"flex",width:1,children:Object(s.jsx)(h.a,{gutterBottom:!0,variant:"h5",children:n(e.role.id)})}),Object(s.jsxs)(p.a,{display:"flex",alignItems:"center",children:["dark"===e.role.aura&&Object(s.jsx)(Oe,{}),e.role.mystical&&Object(s.jsx)(xe,{})]})]}),Object(s.jsx)(h.a,{variant:"body2",color:"textSecondary",children:a(e.role.id)})]})})}function ge(e){return Object(s.jsxs)(p.a,{display:"flex",width:1,alignItems:"center",flexDirection:"column",children:[Object(s.jsx)(p.a,{mt:2,children:Object(s.jsx)(h.a,{variant:"h5",children:Object(s.jsx)(x.a,{id:"game.showRole.title"})})}),Object(s.jsx)(p.a,{mt:2,children:Object(s.jsx)(V,{lastScreen:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.showRole.finish"})}),collection:e.playersData,content:function(t){return Object(s.jsxs)(p.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(s.jsx)(p.a,{mb:2,children:Object(s.jsx)(h.a,{variant:"h6",children:t.player.name})}),Object(s.jsx)(p.a,{display:"flex",width:1,children:Object(s.jsx)(ye,{role:F[t.roleId]})}),Object(o.pipe)({roleId:t.roleId,playersData:e.playersData},(n={whenWolves:c.option.fold(Object(o.constant)(Object(s.jsx)(p.a,{mb:2,children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.showRole.noTraitor"})})})),(function(e){return Object(s.jsxs)(p.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(s.jsx)(p.a,{mb:2,children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.showRole.traitor",values:{name:e.name}})})}),Object(s.jsx)(p.a,{display:"flex",width:1,children:Object(s.jsx)(ye,{role:F.traitor})})]})})),whenMonk:c.option.fold(Object(o.constant)(Object(s.jsx)(p.a,{mb:2,children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.showRole.noMissingRole"})})})),(function(e){return Object(s.jsxs)(p.a,{mb:2,children:[Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.showRole.missingRole",values:{amount:e.length}})}),Object(o.pipe)(e,c.array.map((function(e){return Object(s.jsx)(p.a,{display:"flex",width:1,mt:2,children:Object(s.jsx)(ye,{role:e})})})))]})})),whenPriest:c.option.fold(Object(o.constant)(Object(s.jsx)(p.a,{mb:2,children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.showRole.noSinner"})})})),(function(e){return Object(s.jsxs)(p.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(s.jsx)(p.a,{mb:2,children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"game.showRole.sinner",values:{name:e.name}})})}),Object(s.jsx)(p.a,{display:"flex",width:1,children:Object(s.jsx)(ye,{role:F.sinner})})]})}))},function(e){var t=e.roleId,a=e.playersData;return Object(o.pipe)(G,c.array.findFirst((function(e){return e===t})),c.option.isSome)?n.whenWolves(Object(o.pipe)(a,c.array.findFirst((function(e){return"traitor"===e.roleId})),c.option.map((function(e){return e.player})))):"monk"===t?n.whenMonk(Object(o.pipe)(F,c.record.toArray,c.array.map((function(e){return Object(d.a)(e,2)[1]})),c.array.difference(c.eq.fromEquals((function(e,t){return e.id===t.id})))(Object(o.pipe)(a,c.array.map((function(e){return F[e.roleId]})))),z,(function(e){return 0===e.length?c.option.none:Object(o.pipe)(e,c.array.filterWithIndex((function(e){return e<2})),c.nonEmptyArray.fromArray)}))):"priest"===t?n.whenPriest(Object(o.pipe)(a,c.array.findFirstMap((function(e){return"sinner"===e.roleId?c.option.some(e.player):c.option.none})))):void 0}))]});var n},onProceed:e.onStartGame})})]})}var ve=n(42);var we={_tag:"Home"},De={_tag:"Roles"},Ie={_tag:"Game"},Ce={_tag:"Players"},ke=we,Se=De,Ne=Ie,We=Ce,Ae=ve.b,Fe=Object(ve.d)("roles").then(ve.b),Re=Object(ve.d)("game").then(ve.b),Pe=Object(ve.d)("players").then(ve.b),Ee=Object(ve.f)().alt(Ae.parser.map((function(){return we}))).alt(Fe.parser.map((function(){return De}))).alt(Re.parser.map((function(){return Ie}))).alt(Pe.parser.map((function(){return Ce})));var Te={formatLocation:function(e){switch(e._tag){case"Home":return Object(ve.c)(Ae.formatter,e);case"Roles":return Object(ve.c)(Fe.formatter,e);case"Game":return Object(ve.c)(Re.formatter,e);case"Players":return Object(ve.c)(Pe.formatter,e)}},parseLocation:function(e){return Object(ve.e)(Ee,ve.a.parse(e),we)}},Me=function(){var e=Object(l.createContext)(c.option.none);return{RouterProvider:function(t){var n=Object(o.pipe)(t.basepath,c.option.map((function(e){return e.split("/").length+1})),c.option.getOrElse(Object(o.constant)(0))),a=t.useHashHistory?Object(o.pipe)(window.location.pathname+window.location.search+window.location.hash,c.string.replace("#","")):window.location.pathname,r=function(){return Object(o.pipe)(a,c.string.split("/"),c.nonEmptyArray.fromReadonlyNonEmptyArray,c.array.dropLeft(n)).join("/")},i=Object(l.useState)(t.routing.parseLocation(r())),j=Object(d.a)(i,2),u=j[0],p=j[1],b=function(){p(t.routing.parseLocation(r()))};Object(l.useEffect)((function(){return window.addEventListener("popstate",b),function(){window.removeEventListener("popstate",b)}}));var f={parseLocation:t.routing.parseLocation,formatLocation:function(e){return Object(o.pipe)(t.basepath,c.option.map((function(e){return"/"+e})),c.option.getOrElse(Object(o.constant)("")))+(t.useHashHistory?"/#":"")+t.routing.formatLocation(e)}};return Object(s.jsx)(e.Provider,{value:c.option.some({routing:f,location:u,setLocation:p}),children:t.children})},useRouter:function(){var t=Object(l.useContext)(e);if(c.option.isNone(t))throw new Error("RouterContext not provided");return{current:t.value.location,navigateTo:function(e){var n=t.value.routing.formatLocation(e);console.log(n),window.history.pushState(null,"",n),window.scrollTo(0,0),t.value.setLocation(e)},back:function(){window.history.back()}}}}}(),Be=Me.RouterProvider,He=Me.useRouter;function Le(e,t){switch(t.type){case"startFreshGame":return{view:"selectPlayers"};case"assignRoleToPlayer":var n={phase:"showRole",playersData:function(e){var t=Math.floor(e.length/4)-1,n=Object(o.pipe)(e,z),r=[];Object(o.pipe)(n.pop(),c.option.fromNullable,c.option.fold((function(){}),(function(e){return r.push({player:e,roleId:F.primaryWolf.id})}))),Object(o.pipe)(n.pop(),c.option.fromNullable,c.option.fold((function(){}),(function(e){return r.push({player:e,roleId:F.seer.id})})));for(var i=Object(o.pipe)([F.secondaryWolf,F.youngWolf,F.traitor],_((function(e){return e.fitness}))),l=function(e){Object(o.pipe)(n.pop(),c.option.fromNullable,c.option.fold((function(){}),(function(t){return r.push({player:t,roleId:i[e].id})})))},s=0;s<t;s++)l(s);var j=Object(o.pipe)(F,c.record.filter((function(e){return"seer"!==e.id&&"primaryWolf"!==e.id&&Object(o.pipe)(i,c.array.findFirst((function(t){return t.id===e.id})),c.option.isNone)})),c.record.toArray,_((function(e){return Object(d.a)(e,2)[1].fitness})));return Object(o.pipe)(n,c.array.map((function(e){return Object(o.pipe)(j.pop(),c.option.fromNullable,c.option.fold((function(){}),(function(t){var n=Object(d.a)(t,2)[1];return r.push({player:e,roleId:n.id})})))}))),Object(o.pipe)(r,z,c.array.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{alive:!0,turnedIntoWolf:!1})})))}(t.payload),nightNumber:1,farmerTurnedIntoWolves:[],healerUseHisAbility:!1,lastTurn:c.option.none};return pe("gameData",L,n),{view:"showRole",gameData:n};case"startNight":if("showRole"===e.view){var r=Object(a.a)(Object(a.a)({},e.gameData),{},{phase:"night"});return pe("gameData",L,r),{view:"night",gameData:r}}return e;case"endNight":if("night"===e.view){var i=Object(a.a)(Object(a.a)({},e.gameData),{},{playersData:Object(o.pipe)(e.gameData.playersData,c.array.map((function(n){return Object(o.pipe)(t.payload.killedPlayers,c.array.findFirst((function(e){return e.name===n.player.name})),c.option.fold(Object(o.constant)(n),Object(o.constant)(Object(a.a)(Object(a.a)({},n),{},{alive:!1,killedDuringNightNumber:e.gameData.nightNumber}))))}))),healerUseHisAbility:t.payload.healerUseHisAbility,farmerTurnedIntoWolves:Object(o.pipe)(t.payload.farmerIntoWolf,c.option.fold(Object(o.constant)(Object(k.a)(e.gameData.farmerTurnedIntoWolves)),(function(t){return[].concat(Object(k.a)(e.gameData.farmerTurnedIntoWolves),[t])}))),nightNumber:e.gameData.nightNumber+1,lastTurn:c.option.some({killedDuringNight:t.payload.killedPlayers,findAura:t.payload.findAura,killedDuringDay:c.option.none}),phase:"nightRecapAndDiscussion"});return pe("gameData",L,i),{view:"nightRecapAndDiscussion",gameData:i,playerKilled:t.payload.killedPlayers,newsFromBard:Object(o.pipe)(e.gameData.playersData,c.array.findFirst((function(e){return"bard"===e.roleId})),c.option.map((function(){return Object(o.pipe)(t.payload.findAura,c.option.fold(o.constFalse,(function(e){return"light"===e})))})),c.option.getOrElse(o.constFalse)),newsFromInn:Object(o.pipe)(e.gameData.playersData,c.array.findFirst((function(e){return"innkeeper"===e.roleId})),c.option.map((function(){return Object(o.pipe)(t.payload.findAura,c.option.fold(o.constFalse,(function(e){return"dark"===e})))})),c.option.getOrElse(o.constFalse))}}return e;case"resumeGame":switch(t.payload.phase){case"showRole":return{view:"showRole",gameData:t.payload};case"night":return{view:"night",gameData:t.payload};case"nightRecapAndDiscussion":return{view:"nightRecapAndDiscussion",gameData:t.payload,playerKilled:Object(o.pipe)(t.payload.lastTurn,c.option.map((function(e){return e.killedDuringNight})),c.option.getOrElse(Object(o.constant)([]))),newsFromBard:Object(o.pipe)(t.payload.playersData,c.array.findFirst((function(e){return"bard"===e.roleId})),c.option.map((function(){return Object(o.pipe)(t.payload.lastTurn,c.option.chain((function(e){return e.findAura})),c.option.fold(o.constFalse,(function(e){return"light"===e})))})),c.option.getOrElse(o.constFalse)),newsFromInn:Object(o.pipe)(t.payload.playersData,c.array.findFirst((function(e){return"innkeeper"===e.roleId})),c.option.map((function(){return Object(o.pipe)(t.payload.lastTurn,c.option.chain((function(e){return e.findAura})),c.option.fold(o.constFalse,(function(e){return"dark"===e})))})),c.option.getOrElse(o.constFalse))}}return e}}function ze(){var e,t=He(),n=Object(l.useReducer)(Le,Object(o.pipe)(de("gameData",L),c.option.fold(Object(o.constant)({view:"selectPlayers"}),(function(e){return{view:"init",gameData:e}})))),a=Object(d.a)(n,2),r=a[0],i=a[1];return Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",alignItems:"center",children:[Object(s.jsx)(b.a,{position:"static",children:Object(s.jsxs)(f.a,{children:[Object(s.jsx)(m.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return t.navigateTo(ke)},children:Object(s.jsx)(O.a,{})}),Object(s.jsx)(p.a,{display:"flex",width:1,children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"players"})})})]})}),Object(s.jsx)(p.a,{display:"flex",m:2,width:1,flexDirection:"row",alignItems:"center",children:Object(o.pipe)(r,(e={whenInit:function(e){return Object(s.jsx)(C,{open:!0,title:Object(s.jsx)(x.a,{id:"game.resumeGame.title"}),content:Object(s.jsx)(x.a,{id:"game.resumeGame.content"}),onConfirm:function(){return i({type:"resumeGame",payload:e})},onCancel:function(){localStorage.removeItem("gameData"),i({type:"startFreshGame"})},confirmLabel:"game.resumeGame.confirm",cancelLabel:"game.resumeGame.cancel"})},whenSelectPlayers:Object(o.constant)(Object(s.jsx)(be,{onNext:function(e){return i({type:"assignRoleToPlayer",payload:e})}})),whenShowRole:function(e){return Object(s.jsx)(ge,{playersData:e,onStartGame:function(){return i({type:"startNight"})}})},whenNight:function(e,t){return Object(s.jsx)(se,{playersData:e,nightNumber:t,wolvesDoubleAttack:!1,onNightResult:function(e){return i({type:"endNight",payload:e})}})},whenNightRecapAndDiscussion:function(e,t,n){return Object(s.jsx)(je,{playerKilled:e,newsFromInn:t,newsFromBard:n,onProceedWithVoting:function(){}})}},function(t){switch(t.view){case"init":return e.whenInit(t.gameData);case"selectPlayers":return e.whenSelectPlayers();case"showRole":return e.whenShowRole(t.gameData.playersData);case"night":return e.whenNight(t.gameData.playersData,t.gameData.nightNumber);case"nightRecapAndDiscussion":return e.whenNightRecapAndDiscussion(t.playerKilled,t.newsFromInn,t.newsFromBard)}}))})]})}function _e(){var e=He();return Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",alignItems:"center",children:[Object(s.jsx)(h.a,{variant:"h1",children:Object(s.jsx)(x.a,{id:"appTitle"})}),Object(s.jsx)(p.a,{mt:10,width:1,display:"flex",alignItems:"center",flexDirection:"column",children:Object(s.jsxs)(U.a,{container:!0,item:!0,xs:6,direction:"column",justifyContent:"center",spacing:3,children:[Object(s.jsx)(U.a,{item:!0,children:Object(s.jsx)(I.a,{variant:"contained",color:"primary",onClick:function(){return e.navigateTo(Ne)},fullWidth:!0,children:Object(s.jsx)(x.a,{id:"game"})})}),Object(s.jsx)(U.a,{item:!0,children:Object(s.jsx)(I.a,{variant:"contained",color:"primary",onClick:function(){return e.navigateTo(Se)},fullWidth:!0,children:Object(s.jsx)(x.a,{id:"role"})})}),Object(s.jsx)(U.a,{item:!0,children:Object(s.jsx)(I.a,{variant:"contained",color:"primary",onClick:function(){return e.navigateTo(We)},fullWidth:!0,children:Object(s.jsx)(x.a,{id:"players"})})})]})})]})}var Ge=n(217),Ke=n(229),qe=n(218),Ue=n(99),Ve=n.n(Ue);var Je=n(215),Qe=n(216),Xe=n(120),Ye=n.n(Xe);function Ze(e){var t=Object(l.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1];return Object(s.jsxs)(U.a,{item:!0,xs:6,sm:4,md:3,lg:2,children:[Object(s.jsxs)(fe.a,{children:[Object(s.jsx)(Je.a,{}),Object(s.jsx)(me.a,{children:Object(s.jsx)(h.a,{gutterBottom:!0,variant:"h5",children:e.player.name})}),Object(s.jsx)(Qe.a,{disableSpacing:!0,children:Object(s.jsx)(m.a,{"aria-label":"delete",onClick:function(){return r(!0)},children:Object(s.jsx)(Ye.a,{})})})]}),Object(s.jsx)(C,{open:a,title:Object(s.jsx)(x.a,{id:"player.delete.confirmDialog.title"}),content:Object(s.jsx)(x.a,{id:"player.delete.confirmDialog.content"}),onConfirm:function(){r(!1),e.onDelete()},onCancel:function(){return r(!1)}})]})}var $e=n(121),et=n.n($e),tt=n(59),nt=n(221);function at(e){return Object(s.jsx)(nt.a,{fullWidth:!0,label:e.label,defaultValue:e.placeholder,disabled:e.disabled,onChange:function(t){return e.onChange(t.currentTarget.value)},onBlur:e.onBlur,value:e.value,name:e.name,error:Object(o.pipe)(e.issues,c.option.isSome),helperText:Object(o.pipe)(e.issues,c.option.map((function(e){return Object(o.pipe)(e,c.nonEmptyArray.head)})),c.option.toNullable)})}function rt(){var e,t=Object(Y.a)();return{nonBlankString:(e=t.formatMessage({id:"form.validators.nonBlankString"}),tt.validators.validator(c.either.fromPredicate((function(e){return e.trim().length>0}),Object(o.constant)(e)))),uniqueString:function(e){return function(t){return tt.validators.validator(c.either.fromPredicate((function(e){return Object(o.pipe)(t,c.array.findFirst((function(t){return t===e})),c.option.isNone)}),Object(o.constant)(e)))}}(t.formatMessage({id:"form.validators.uniqueString"})),defined:function(){return tt.validators.defined(t.formatMessage({id:"form.validators.defined"}))},definedNoExtract:function(){return tt.validators.definedNoExtract(t.formatMessage({id:"form.validators.defined"}))}}}function it(e){var t=Object(Y.a)().formatMessage,n=rt(),r=n.nonBlankString,i=n.uniqueString,o=Object(tt.useFormo)({initialValues:{name:""},fieldValidators:function(){return{name:tt.validators.inParallel(r,i(e.playerNames))}}},{onSubmit:function(t){return c.taskEither.fromIO((function(){return e.onConfirm(t.name)}))}}),l=o.fieldProps,j=o.handleSubmit;return Object(s.jsxs)(y.a,{open:e.open,fullWidth:!0,onClose:e.onCancel,children:[Object(s.jsx)(g.a,{children:Object(s.jsx)(x.a,{id:e.title})}),Object(s.jsx)(v.a,{children:Object(s.jsx)(at,Object(a.a)({label:t({id:"player.form.label.name"}),placeholder:""},l("name")))}),Object(s.jsxs)(D.a,{children:[Object(s.jsx)(I.a,{onClick:e.onCancel,color:"primary",children:Object(s.jsx)(x.a,{id:"cancel"})}),Object(s.jsx)(I.a,{onClick:j,color:"primary",children:Object(s.jsx)(x.a,{id:"ok"})})]})]})}var ot=Object(Ge.a)((function(e){return Object(Ke.a)({fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}})}));function ct(){var e=ot(),t=He(),n=function(e,t,n){var a=Object(o.pipe)(de(e,t),c.option.getOrElse((function(){return pe(e,t,n),n}))),r=Object(l.useState)(a),i=Object(d.a)(r,2),s=i[0],j=i[1];return[s,function(n){return Object(o.pipe)(pe(e,t,n),c.either.fold((function(){}),(function(){return j(n)})))}]}("players",N.c(T),[]),a=Object(d.a)(n,2),r=a[0],i=a[1],j=Object(l.useState)(!1),u=Object(d.a)(j,2),O=u[0],y=u[1];return Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",alignItems:"center",children:[Object(s.jsx)(b.a,{position:"static",children:Object(s.jsxs)(f.a,{children:[Object(s.jsx)(m.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return t.navigateTo(ke)},children:Object(s.jsx)(Ve.a,{})}),Object(s.jsx)(p.a,{display:"flex",width:1,children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"players"})})})]})}),Object(s.jsxs)(p.a,{display:"flex",m:2,width:1,flexDirection:"row",alignItems:"center",children:[Object(s.jsx)(U.a,{container:!0,direction:"row",spacing:2,justifyContent:"center",alignItems:"center",children:r.map((function(e){return Object(s.jsx)(Ze,{player:e,onDelete:function(){return i(Object(o.pipe)(r,c.array.filter((function(t){return t.name!==e.name}))))}})}))}),Object(s.jsx)(qe.a,{color:"primary","aria-label":"add",className:e.fab,onClick:function(){return y(!0)},children:Object(s.jsx)(et.a,{})}),O&&Object(s.jsx)(it,{open:O,title:"player.form.label.title",playerNames:Object(o.pipe)(r,c.array.map((function(e){return e.name}))),onCancel:function(){return y(!1)},onConfirm:function(e){i([].concat(Object(k.a)(r),[{name:e}])),y(!1)}})]})]})}var lt=n(226),st=n(219),jt=n(122),ut=n.n(jt);function dt(){var e=He(),t=function(){var e=Object(Y.a)().formatMessage;return function(t){switch(t){case"general":return e({id:"faction.general"});case"wolf":return e({id:"faction.wolf"});case"village":return e({id:"faction.village"})}}}();return Object(s.jsxs)(p.a,{display:"flex",width:1,flexDirection:"column",alignItems:"center",children:[Object(s.jsx)(b.a,{position:"static",children:Object(s.jsxs)(f.a,{children:[Object(s.jsx)(m.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return e.navigateTo(ke)},children:Object(s.jsx)(Ve.a,{})}),Object(s.jsx)(p.a,{display:"flex",width:1,children:Object(s.jsx)(h.a,{variant:"h6",children:Object(s.jsx)(x.a,{id:"role"})})})]})}),Object(s.jsx)(p.a,{display:"flex",width:1,flexDirection:"column",alignItems:"center",children:Object(o.pipe)(E,c.array.map((function(e){return Object(s.jsxs)(lt.a,{children:[Object(s.jsx)(st.a,{expandIcon:Object(s.jsx)(ut.a,{}),children:Object(s.jsx)(h.a,{children:t(e)})}),Object(s.jsx)(p.a,{m:2,children:Object(s.jsx)(U.a,{container:!0,direction:"row",spacing:2,justifyContent:"center",alignItems:"center",children:Object(o.pipe)(F,c.record.filter((function(t){return t.faction===e})),c.record.toArray,c.array.map((function(e){var t=Object(d.a)(e,2)[1];return Object(s.jsx)(U.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(s.jsx)(ye,{role:t},t.id)})})))})})]},e)})))})]})}function pt(){var e,t=He();return Object(o.pipe)(t.current,(e={Home:Object(o.constant)(Object(s.jsx)(_e,{})),Roles:Object(o.constant)(Object(s.jsx)(dt,{})),Game:Object(o.constant)(Object(s.jsx)(ze,{})),Players:Object(o.constant)(Object(s.jsx)(ct,{}))},function(t){return e[t._tag](t)}))}var bt=function(){var e=function(){var e=Object(l.useContext)(j);if(c.option.isNone(e))throw new Error("BuildConfigContext not provided");return e.value}();return Object(s.jsx)(Be,{basepath:e.basepath,useHashHistory:!0,routing:Te,children:Object(s.jsx)(pt,{})})},ft=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,232)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))},mt=n(223),ht=n(220);function Ot(){return Object(s.jsx)(p.a,{display:"flex",width:1,height:1,alignItems:"center",justifyContent:"center",children:Object(s.jsx)(ht.a,{})})}function xt(e){var t=Object(l.useState)(c.option.none),r=Object(d.a)(t,2),i=r[0],j=r[1];return Object(l.useEffect)((function(){var t;Object(o.pipe)((t=e.locale,c.taskEither.tryCatch((function(){switch(t){case"it":return n.e(4).then(n.t.bind(null,233,3)).then((function(e){return Object(a.a)({},e.default)}))}}),N.g)),c.taskEither.map((function(e){return j(c.option.some(e))})))()}),[e.locale]),Object(o.pipe)(i,c.option.fold(Object(o.constant)(Object(s.jsx)(Ot,{})),(function(t){return Object(s.jsx)(mt.a,{messages:t,locale:e.locale,children:e.children})})))}var yt=n(123),gt=N.n({REACT_APP_BASEPATH:Object(yt.a)(W.a)},"BuildConfig"),vt=Object(o.pipe)(gt.decode(Object({NODE_ENV:"production",PUBLIC_URL:"/wherewolf",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASEPATH:"wherewolf"})),c.either.fold((function(e){throw new Error(Object(ue.failure)(e).join("\n"))}),(function(e){return{basepath:e.REACT_APP_BASEPATH}})));i.a.render(Object(s.jsx)(l.StrictMode,{children:Object(s.jsx)(u,Object(a.a)(Object(a.a)({},vt),{},{children:Object(s.jsx)(xt,{locale:"it",children:Object(s.jsx)(bt,{})})}))}),document.getElementById("root")),ft()}},[[169,1,2]]]);
//# sourceMappingURL=main.93a85562.chunk.js.map