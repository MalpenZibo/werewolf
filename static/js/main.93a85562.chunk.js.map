{"version":3,"sources":["ConfigProvider.tsx","blocks/Common/ConfirmationDialog.tsx","domain.ts","gameplay.ts","blocks/Common/Stepper.tsx","blocks/SelectPlayer.tsx","utils.ts","blocks/HealerNight.tsx","blocks/Common/ShowAuraDialog.tsx","blocks/MediumNight.tsx","blocks/SeerNight.tsx","blocks/WitchNight.tsx","blocks/Common/ShowMysticalDialog.tsx","blocks/WizardNight.tsx","blocks/WolvesNight.tsx","blocks/FarmerDeadDecisionDialog.tsx","blocks/TraitorDialog.tsx","blocks/Night.tsx","blocks/NightRecapAndDiscussion.tsx","localStorage.ts","blocks/SelectPlayers.tsx","Icons/DarkAuraIcon.tsx","Icons/MysticalIcon.tsx","blocks/RoleCard.tsx","blocks/ShowRole.tsx","routing.ts","Router/RouterProvider.tsx","Pages/GameState.ts","Pages/Game.tsx","Pages/Home.tsx","blocks/PlayerCard.tsx","Form/TextField.tsx","Form/validators.ts","blocks/PlayerForm.tsx","Pages/Players.tsx","useLocalStorageState.ts","Pages/Roles.tsx","App.tsx","reportWebVitals.ts","blocks/Common/Waiting.tsx","IntlProvider.tsx","config.ts","index.tsx"],"names":["BuildConfigContext","createContext","option","none","BuildConfigProvider","basepath","children","Provider","value","some","ConfirmationDialog","props","Dialog","open","onClose","onCancel","DialogTitle","title","DialogContent","DialogContentText","content","DialogActions","Button","autoFocus","onClick","color","id","cancelLabel","onConfirm","confirmLabel","roles","primaryWolf","aura","mystical","faction","fitness","secondaryWolf","youngWolf","traitor","seer","wizard","medium","witch","healer","farmer1","farmer2","innkeeper","bard","monk","heremit","priest","sinner","madman","jester","RoleId","t","Aura","light","dark","factions","pipe","record","toArray","array","map","uniq","S","Player","name","NonEmptyString","PlayerData","player","roleId","alive","Phase","showRole","night","nightRecapAndDiscussion","TurnEntry","killedDuringNight","killedDuringDay","findAura","GameData","phase","playersData","nightNumber","healerUseHisAbility","farmerTurnedIntoWolves","lastTurn","shuffle","temporaryValue","randomIndex","currentIndex","length","shuffleArray","Math","floor","random","fitnessShuffle","getFitness","collection","startIndex","totalFitness","reduceWithIndex","i","a","b","slice","fitnessSoFar","wolves","firstNightTurns","nightTurns","Stepper","useState","index","setIndex","currentElement","lookup","minLimit","maxLimit","Box","display","width","alignItems","flexDirection","mt","fold","constant","lastScreen","Grid","container","spacing","item","variant","onProceed","SelectPlayer","m","justifyContent","players","xs","sm","md","lg","Chip","label","avatar","Avatar","clickable","onSelected","useFormatRole","formatMessage","useIntl","formatName","formatDescription","HealerNight","dialogOpen","setDialogOpen","selectedPlayer","setSelectedPlayer","Typography","findFirst","v","playersDiedThisNight","filter","p","values","onHealedByHealer","toNullable","ShowAuraDialog","MediumNight","filterMap","chain","findFirstMap","SeerNight","onSelectedAura","WitchNight","onProtectedByWitch","ShowMysticalDialog","WizardNight","WolvesNight","w","isSome","nonEmptyArray","fromArray","join","doubleTurn","onAttackedByWolves","FarmerDeadDecisionDialog","showWolves","setShowWolves","onWolf","onNormal","onHero","TraitorDialog","Night","match","killedPlayers","setKilledPlayers","setFindAura","showFarmerDecision","setShowFarmerDecision","showTraitorDialog","setShowTraitorDialog","farmerIntoWolf","setFarmerIntoWolf","setHealerUseHisAbility","whenSeer","whenWolves","pa","isNone","wolvesDoubleAttack","farmer","constNull","bestWolf","sortBy","number","Ord","ord","contramap","wolvesHierarchy","head","wolf","whenWizard","whenMedium","whenWitch","whenHealer","turn","onNightResult","NightRecapAndDiscussion","playerKilled","newsFromInn","newsFromBard","onProceedWithVoting","getValue","key","codec","localStorage","getItem","fromNullable","flow","json","parse","either","mapLeft","e","console","error","chainW","decode","failure","fromEither","setValue","encode","stringify","bimap","encodedValue","setItem","SelectPlayers","selected","setPlayers","amount","getOrElse","minAmount","findIndex","modifyAt","onNext","disabled","DarkAuraIcon","SvgIcon","d","MysticalIcon","RoleCard","Card","CardContent","gutterBottom","role","ShowRole","playerData","mb","whenMonk","missingRoles","r","whenPriest","data","difference","eq","fromEquals","pr","missingRole","filterWithIndex","onStartGame","home","_tag","game","locations","defaults","end","rolesMatch","lit","then","gameMatch","playersMatch","router","zero","alt","parser","routing","formatLocation","l","format","formatter","parseLocation","s","Route","RouterContext","RouterProvider","skipN","split","pathname","useHashHistory","window","location","search","hash","string","replace","getPathname","fromReadonlyNonEmptyArray","dropLeft","setLocation","handleLocationChanges","useEffect","addEventListener","removeEventListener","internalRouting","useRouter","ctx","useContext","Error","current","navigateTo","newLocation","log","history","pushState","scrollTo","back","initializeRouter","reducer","state","action","type","view","gameData","wolfNumber","shuffledPlayers","playerRoles","pop","push","wolfRoles","otherRoles","wr","turnedIntoWolf","generatePlayersData","payload","pd","killedDuringNightNumber","constFalse","Game","useReducer","dispatch","AppBar","position","Toolbar","IconButton","edge","aria-label","ArrowBackSharp","whenInit","removeItem","whenSelectPlayers","whenShowRole","whenNight","whenNightRecapAndDiscussion","Home","direction","fullWidth","PlayerCard","deleteDialogOpen","setDeleteDialogOpen","CardMedia","CardActions","disableSpacing","onDelete","TextField","defaultValue","placeholder","onChange","currentTarget","onBlur","issues","helperText","useValidators","errorMessage","intl","nonBlankString","validators","validator","fromPredicate","trim","uniqueString","defined","definedNoExtract","PlayerForm","useFormo","initialValues","fieldValidators","inParallel","playerNames","onSubmit","taskEither","fromIO","fieldProps","handleSubmit","useStyles","makeStyles","theme","createStyles","fab","bottom","right","Players","classes","initValues","reactState","setReactState","useLocalStorageState","playerFormOpen","setPlayerFormOpen","Fab","className","Roles","formatFaction","useFormatFaction","f","Accordion","AccordionSummary","expandIcon","InternalApp","matches","App","buildConfig","useBuildConfigContext","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Waiting","height","CircularProgress","IntlProvider","messages","setMessages","locale","tryCatch","default","identity","BuildConfigCodec","REACT_APP_BASEPATH","optionFromNullable","process","errors","env","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.93a85562.chunk.js","sourcesContent":["import { option } from \"fp-ts\";\nimport { createContext, useContext } from \"react\";\nimport { Option } from \"fp-ts/Option\";\nimport { BuildConfig } from \"./config\";\n\nexport const BuildConfigContext = createContext<Option<BuildConfig>>(\n  option.none\n);\n\ntype Props = BuildConfig & {\n  children: JSX.Element;\n};\n\nexport function BuildConfigProvider({ basepath, children }: Props) {\n  return (\n    <BuildConfigContext.Provider value={option.some({ basepath })}>\n      {children}\n    </BuildConfigContext.Provider>\n  );\n}\n\nexport function useBuildConfigContext() {\n  const ctx = useContext(BuildConfigContext);\n\n  if (option.isNone(ctx)) {\n    throw new Error(\"BuildConfigContext not provided\");\n  }\n\n  return ctx.value;\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\";\nimport { IO } from \"fp-ts/IO\";\nimport { FormattedMessage } from \"react-intl\";\n\ntype Props = {\n  open: boolean;\n  title: JSX.Element;\n  content: JSX.Element;\n  onConfirm: IO<void>;\n  onCancel: IO<void>;\n  confirmLabel?: string;\n  cancelLabel?: string;\n};\n\nexport function ConfirmationDialog(props: Props) {\n  return (\n    <Dialog open={props.open} onClose={props.onCancel}>\n      <DialogTitle>{props.title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{props.content}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={props.onCancel} color=\"primary\">\n          <FormattedMessage\n            id={props.cancelLabel ? props.cancelLabel : \"cancel\"}\n          />\n        </Button>\n        <Button onClick={props.onConfirm} color=\"primary\">\n          <FormattedMessage\n            id={props.confirmLabel ? props.confirmLabel : \"ok\"}\n          />\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { array, record } from \"fp-ts\";\nimport * as S from \"fp-ts/string\";\nimport { pipe } from \"fp-ts/function\";\nimport * as t from \"io-ts\";\nimport { NonEmptyString } from \"io-ts-types/NonEmptyString\";\nimport { option } from \"io-ts-types/option\";\n\nexport interface Role {\n  readonly id: RoleId;\n  readonly aura: Aura;\n  readonly mystical: boolean;\n  readonly faction: Faction;\n  readonly fitness: number;\n}\n\nconst primaryWolf: Role = {\n  id: \"primaryWolf\",\n  aura: \"dark\",\n  mystical: false,\n  faction: \"wolf\",\n  fitness: 100,\n};\nconst secondaryWolf: Role = {\n  id: \"secondaryWolf\",\n  aura: \"dark\",\n  mystical: false,\n  faction: \"wolf\",\n  fitness: 75,\n};\nconst youngWolf: Role = {\n  id: \"youngWolf\",\n  aura: \"dark\",\n  mystical: false,\n  faction: \"wolf\",\n  fitness: 50,\n};\nconst traitor: Role = {\n  id: \"traitor\",\n  aura: \"light\",\n  mystical: false,\n  faction: \"wolf\",\n  fitness: 30,\n};\nconst seer: Role = {\n  id: \"seer\",\n  aura: \"light\",\n  mystical: true,\n  faction: \"village\",\n  fitness: 100,\n};\nconst wizard: Role = {\n  id: \"wizard\",\n  aura: \"light\",\n  mystical: true,\n  faction: \"village\",\n  fitness: 30,\n};\nconst medium: Role = {\n  id: \"medium\",\n  aura: \"light\",\n  mystical: true,\n  faction: \"village\",\n  fitness: 30,\n};\nconst witch: Role = {\n  id: \"witch\",\n  aura: \"light\",\n  mystical: true,\n  faction: \"village\",\n  fitness: 50,\n};\nconst healer: Role = {\n  id: \"healer\",\n  aura: \"light\",\n  mystical: true,\n  faction: \"village\",\n  fitness: 40,\n};\nconst farmer1: Role = {\n  id: \"farmer1\",\n  aura: \"light\",\n  mystical: false,\n  faction: \"village\",\n  fitness: 200,\n};\nconst farmer2: Role = {\n  id: \"farmer2\",\n  aura: \"light\",\n  mystical: false,\n  faction: \"village\",\n  fitness: 200,\n};\nconst innkeeper: Role = {\n  id: \"innkeeper\",\n  aura: \"light\",\n  mystical: false,\n  faction: \"village\",\n  fitness: 50,\n};\nconst bard: Role = {\n  id: \"bard\",\n  aura: \"light\",\n  mystical: false,\n  faction: \"village\",\n  fitness: 50,\n};\nconst monk: Role = {\n  id: \"monk\",\n  aura: \"light\",\n  mystical: false,\n  faction: \"village\",\n  fitness: 20,\n};\nconst heremit: Role = {\n  id: \"heremit\",\n  aura: \"light\",\n  mystical: false,\n  faction: \"village\",\n  fitness: 20,\n};\nconst priest: Role = {\n  id: \"priest\",\n  aura: \"light\",\n  mystical: false,\n  faction: \"village\",\n  fitness: 40,\n};\nconst sinner: Role = {\n  id: \"sinner\",\n  aura: \"dark\",\n  mystical: false,\n  faction: \"village\",\n  fitness: 40,\n};\nconst madman: Role = {\n  id: \"madman\",\n  aura: \"light\",\n  mystical: false,\n  faction: \"general\",\n  fitness: 20,\n};\nconst jester: Role = {\n  id: \"jester\",\n  aura: \"light\",\n  mystical: false,\n  faction: \"general\",\n  fitness: 20,\n};\n\nexport const roles = {\n  primaryWolf,\n  secondaryWolf,\n  youngWolf,\n  traitor,\n  seer,\n  wizard,\n  medium,\n  witch,\n  healer,\n  farmer1,\n  farmer2,\n  innkeeper,\n  bard,\n  monk,\n  heremit,\n  priest,\n  sinner,\n  madman,\n  jester,\n};\n\nconst RoleId = t.keyof({\n  primaryWolf: true,\n  secondaryWolf: true,\n  youngWolf: true,\n  traitor: true,\n  seer: true,\n  wizard: true,\n  medium: true,\n  witch: true,\n  healer: true,\n  farmer1: true,\n  farmer2: true,\n  innkeeper: true,\n  bard: true,\n  monk: true,\n  heremit: true,\n  priest: true,\n  sinner: true,\n  madman: true,\n  jester: true,\n});\nexport type RoleId = t.TypeOf<typeof RoleId>;\n\nexport type Faction = \"village\" | \"general\" | \"wolf\";\n\nexport const Aura = t.keyof({ light: true, dark: true });\nexport type Aura = t.TypeOf<typeof Aura>;\n\nexport const factions = pipe(\n  roles,\n  record.toArray,\n  array.map(([, r]) => r.faction),\n  array.uniq<Faction>(S.Eq)\n);\n\nexport const Player = t.type({\n  name: NonEmptyString,\n});\nexport type Player = t.TypeOf<typeof Player>;\n\nconst PlayerData = t.type({\n  player: Player,\n  roleId: RoleId,\n  alive: t.boolean,\n});\nexport type PlayerData = t.TypeOf<typeof PlayerData>;\n\nconst Phase = t.keyof({\n  showRole: true,\n  night: true,\n  nightRecapAndDiscussion: true,\n});\n\nexport const TurnEntry = t.type({\n  killedDuringNight: t.array(Player),\n  killedDuringDay: option(Player),\n  findAura: option(Aura),\n});\n\nexport const GameData = t.type({\n  phase: Phase,\n  playersData: t.array(PlayerData),\n  nightNumber: t.number,\n  healerUseHisAbility: t.boolean,\n  farmerTurnedIntoWolves: t.array(Player),\n  lastTurn: option(TurnEntry),\n});\nexport type GameData = t.TypeOf<typeof GameData>;\n","import { array, eq, option, record, nonEmptyArray } from \"fp-ts\";\nimport { pipe } from \"fp-ts/function\";\nimport { Player, PlayerData, Role, RoleId, roles } from \"./domain\";\nimport { Option } from \"fp-ts/Option\";\nimport { NonEmptyArray } from \"fp-ts/NonEmptyArray\";\n\nfunction shuffle<T>(array: T[]): T[] {\n  let currentIndex = array.length,\n    temporaryValue,\n    randomIndex;\n  let shuffleArray = [...array];\n  while (0 !== currentIndex) {\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n    temporaryValue = shuffleArray[currentIndex];\n    shuffleArray[currentIndex] = shuffleArray[randomIndex];\n    shuffleArray[randomIndex] = temporaryValue;\n  }\n  return shuffleArray;\n}\n\nfunction fitnessShuffle<T>(\n  getFitness: (t: T) => number\n): (collection: T[]) => T[] {\n  return (collection: T[]): T[] => {\n    let currentIndex = 0;\n    let shuffleArray: T[] = [...collection];\n    while (currentIndex < shuffleArray.length) {\n      const startIndex = currentIndex;\n      const totalFitness = pipe(\n        shuffleArray,\n        array.reduceWithIndex(0, (i, a, b) =>\n          i >= startIndex ? a + getFitness(b) : a\n        )\n      );\n      const slice = Math.floor(Math.random() * totalFitness);\n\n      let fitnessSoFar = 0;\n      for (let i = currentIndex; i < shuffleArray.length; i++) {\n        fitnessSoFar += getFitness(shuffleArray[i]);\n        if (fitnessSoFar > slice) {\n          const t = shuffleArray[currentIndex];\n          shuffleArray[currentIndex] = shuffleArray[i];\n          shuffleArray[i] = t;\n        }\n      }\n      currentIndex += 1;\n    }\n    return shuffleArray;\n  };\n}\n\nexport function generatePlayersData(players: Player[]): PlayerData[] {\n  const wolfNumber = Math.floor(players.length / 4) - 1;\n\n  const shuffledPlayers = pipe(players, shuffle);\n\n  let playerRoles: { player: Player; roleId: RoleId }[] = [];\n  pipe(\n    shuffledPlayers.pop(),\n    option.fromNullable,\n    option.fold(\n      () => {},\n      (p) => playerRoles.push({ player: p, roleId: roles.primaryWolf.id })\n    )\n  );\n  pipe(\n    shuffledPlayers.pop(),\n    option.fromNullable,\n    option.fold(\n      () => {},\n      (p) => playerRoles.push({ player: p, roleId: roles.seer.id })\n    )\n  );\n\n  const wolfRoles = pipe(\n    [roles.secondaryWolf, roles.youngWolf, roles.traitor],\n    fitnessShuffle((t) => t.fitness)\n  );\n  for (let i = 0; i < wolfNumber; i++) {\n    pipe(\n      shuffledPlayers.pop(),\n      option.fromNullable,\n      option.fold(\n        () => {},\n        (p) => playerRoles.push({ player: p, roleId: wolfRoles[i].id })\n      )\n    );\n  }\n\n  const otherRoles = pipe(\n    roles,\n    record.filter(\n      (r) =>\n        r.id !== \"seer\" &&\n        r.id !== \"primaryWolf\" &&\n        pipe(\n          wolfRoles,\n          array.findFirst((wr) => wr.id === r.id),\n          option.isNone\n        )\n    ),\n    record.toArray,\n    fitnessShuffle(([, t]) => t.fitness)\n  );\n\n  pipe(\n    shuffledPlayers,\n    array.map((p) =>\n      pipe(\n        otherRoles.pop(),\n        option.fromNullable,\n        option.fold(\n          () => {},\n          ([, r]) => playerRoles.push({ player: p, roleId: r.id })\n        )\n      )\n    )\n  );\n\n  return pipe(\n    playerRoles,\n    shuffle,\n    array.map((v) => ({\n      ...v,\n      alive: true,\n      turnedIntoWolf: false,\n    }))\n  );\n}\n\nexport const wolves: RoleId[] = [\"primaryWolf\", \"secondaryWolf\", \"youngWolf\"];\n\ntype NightTurn = \"seer\" | \"wolves\" | \"wizard\" | \"medium\" | \"witch\" | \"healer\";\nexport const firstNightTurns: NightTurn[] = [\"seer\", \"wizard\"];\nexport const nightTurns: NightTurn[] = [\n  \"seer\",\n  \"wolves\",\n  \"wizard\",\n  \"medium\",\n  \"witch\",\n  \"healer\",\n];\n\nexport function foldShowRoleAction(match: {\n  whenWolves: (traitor: Option<Player>) => JSX.Element;\n  whenMonk: (missingRoles: Option<NonEmptyArray<Role>>) => JSX.Element;\n  whenPriest: (sinner: Option<Player>) => JSX.Element;\n}): (data: {\n  roleId: RoleId;\n  playersData: PlayerData[];\n}) => JSX.Element | undefined {\n  return (data: { roleId: RoleId; playersData: PlayerData[] }) => {\n    const { roleId, playersData } = data;\n    if (\n      pipe(\n        wolves,\n        array.findFirst((v) => v === roleId),\n        option.isSome\n      )\n    ) {\n      return match.whenWolves(\n        pipe(\n          playersData,\n          array.findFirst((v) => v.roleId === \"traitor\"),\n          option.map((v) => v.player)\n        )\n      );\n    }\n\n    if (roleId === \"monk\") {\n      return match.whenMonk(\n        pipe(\n          roles,\n          record.toArray,\n          array.map(([, r]) => r),\n          array.difference<Role>(eq.fromEquals((a, b) => a.id === b.id))(\n            pipe(\n              playersData,\n              array.map((pr) => roles[pr.roleId])\n            )\n          ),\n          shuffle,\n          (missingRole): Option<NonEmptyArray<Role>> => {\n            if (missingRole.length === 0) {\n              return option.none;\n            }\n\n            return pipe(\n              missingRole,\n              array.filterWithIndex((i) => i < 2),\n              nonEmptyArray.fromArray\n            );\n          }\n        )\n      );\n    }\n\n    if (roleId === \"priest\") {\n      return match.whenPriest(\n        pipe(\n          playersData,\n          array.findFirstMap((v) =>\n            v.roleId === \"sinner\" ? option.some(v.player) : option.none\n          )\n        )\n      );\n    }\n\n    return;\n  };\n}\n\nexport function foldNightAction(match: {\n  whenSeer: () => JSX.Element;\n  whenWolves: () => JSX.Element;\n  whenWizard: () => JSX.Element;\n  whenMedium: () => JSX.Element;\n  whenWitch: () => JSX.Element;\n  whenHealer: () => JSX.Element;\n}): (turn: NightTurn) => JSX.Element {\n  return (turn: NightTurn) => {\n    switch (turn) {\n      case \"seer\":\n        return match.whenSeer();\n      case \"wolves\":\n        return match.whenWolves();\n      case \"wizard\":\n        return match.whenWizard();\n      case \"medium\":\n        return match.whenMedium();\n      case \"witch\":\n        return match.whenWitch();\n      case \"healer\":\n        return match.whenHealer();\n    }\n  };\n}\n\nexport function wolvesHierarchy(roleId: RoleId) {\n  switch (roleId) {\n    case \"primaryWolf\":\n      return 1;\n    case \"secondaryWolf\":\n      return 2;\n    case \"farmer1\":\n      return 3;\n    case \"farmer2\":\n      return 3;\n    case \"youngWolf\":\n      return 4;\n    default:\n      return 99;\n  }\n}\n","import { Box, Button, Grid } from \"@material-ui/core\";\nimport { array, option } from \"fp-ts\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { IO } from \"fp-ts/IO\";\nimport { useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\n\ntype Props<T> = {\n  collection: T[];\n  lastScreen: JSX.Element;\n  content: (e: T) => JSX.Element;\n  onProceed: IO<void>;\n};\n\nexport function Stepper<T>(props: Props<T>) {\n  const [index, setIndex] = useState(0);\n\n  const currentElement = pipe(props.collection, array.lookup(index));\n\n  const minLimit = index === 0;\n  const maxLimit = index === props.collection.length;\n\n  return (\n    <Box display=\"flex\" width={1} alignItems=\"center\" flexDirection=\"column\">\n      <Box mt={2} width={1}>\n        {pipe(\n          currentElement,\n          option.fold(constant(props.lastScreen), props.content)\n        )}\n      </Box>\n\n      <Box mt={2}>\n        <Grid container spacing={2}>\n          {!minLimit && (\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => (index > 0 ? setIndex(index - 1) : {})}\n              >\n                <FormattedMessage id=\"prev\" />\n              </Button>\n            </Grid>\n          )}\n          {!maxLimit && (\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => setIndex(index + 1)}\n              >\n                <FormattedMessage id=\"next\" />\n              </Button>\n            </Grid>\n          )}\n          {maxLimit && (\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={props.onProceed}\n              >\n                <FormattedMessage id=\"start\" />\n              </Button>\n            </Grid>\n          )}\n        </Grid>\n      </Box>\n    </Box>\n  );\n}\n","import { Player } from \"../domain\";\nimport { Avatar, Box, Chip, Grid } from \"@material-ui/core\";\nimport { Reader } from \"fp-ts/Reader\";\n\ntype Props = {\n  players: Player[];\n  onSelected: Reader<Player, void>;\n};\n\nexport function SelectPlayer(props: Props) {\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\" m={4}>\n      <Grid container justifyContent=\"center\" alignItems=\"center\" spacing={2}>\n        {props.players.map((player) => {\n          return (\n            <Grid\n              key={player.name}\n              justifyContent=\"center\"\n              alignItems=\"center\"\n              container\n              item\n              xs={4}\n              sm={3}\n              md={2}\n              lg={1}\n            >\n              <Chip\n                label={player.name}\n                avatar={<Avatar>{player.name[0]}</Avatar>}\n                clickable\n                color=\"primary\"\n                onClick={() => props.onSelected(player)}\n                variant=\"outlined\"\n              />\n            </Grid>\n          );\n        })}\n      </Grid>\n    </Box>\n  );\n}\n","import { useIntl } from \"react-intl\";\nimport { Faction, RoleId } from \"./domain\";\n\nexport function useFormatRole(): {\n  formatName: (roleId: RoleId) => string;\n  formatDescription: (roleId: RoleId) => string;\n} {\n  const { formatMessage } = useIntl();\n\n  const formatName = (roleId: RoleId) => {\n    switch (roleId) {\n      case \"primaryWolf\":\n        return formatMessage({ id: \"role.primaryWolf.name\" });\n      case \"secondaryWolf\":\n        return formatMessage({ id: \"role.secondaryWolf.name\" });\n      case \"youngWolf\":\n        return formatMessage({ id: \"role.youngWolf.name\" });\n      case \"traitor\":\n        return formatMessage({ id: \"role.traitor.name\" });\n      case \"seer\":\n        return formatMessage({ id: \"role.seer.name\" });\n      case \"wizard\":\n        return formatMessage({ id: \"role.wizard.name\" });\n      case \"medium\":\n        return formatMessage({ id: \"role.medium.name\" });\n      case \"witch\":\n        return formatMessage({ id: \"role.witch.name\" });\n      case \"healer\":\n        return formatMessage({ id: \"role.healer.name\" });\n      case \"farmer1\":\n        return formatMessage({ id: \"role.farmer.name\" });\n      case \"farmer2\":\n        return formatMessage({ id: \"role.farmer.name\" });\n      case \"innkeeper\":\n        return formatMessage({ id: \"role.innkeeper.name\" });\n      case \"bard\":\n        return formatMessage({ id: \"role.bard.name\" });\n      case \"monk\":\n        return formatMessage({ id: \"role.monk.name\" });\n      case \"heremit\":\n        return formatMessage({ id: \"role.heremit.name\" });\n      case \"priest\":\n        return formatMessage({ id: \"role.priest.name\" });\n      case \"sinner\":\n        return formatMessage({ id: \"role.sinner.name\" });\n      case \"madman\":\n        return formatMessage({ id: \"role.madman.name\" });\n      case \"jester\":\n        return formatMessage({ id: \"role.jester.name\" });\n    }\n  };\n\n  const formatDescription = (roleId: RoleId) => {\n    switch (roleId) {\n      case \"primaryWolf\":\n        return formatMessage({ id: \"role.primaryWolf.description\" });\n      case \"secondaryWolf\":\n        return formatMessage({ id: \"role.secondaryWolf.description\" });\n      case \"youngWolf\":\n        return formatMessage({ id: \"role.youngWolf.description\" });\n      case \"traitor\":\n        return formatMessage({ id: \"role.traitor.description\" });\n      case \"seer\":\n        return formatMessage({ id: \"role.seer.description\" });\n      case \"wizard\":\n        return formatMessage({ id: \"role.wizard.description\" });\n      case \"medium\":\n        return formatMessage({ id: \"role.medium.description\" });\n      case \"witch\":\n        return formatMessage({ id: \"role.witch.description\" });\n      case \"healer\":\n        return formatMessage({ id: \"role.healer.description\" });\n      case \"farmer1\":\n        return formatMessage({ id: \"role.farmer.description\" });\n      case \"farmer2\":\n        return formatMessage({ id: \"role.farmer.description\" });\n      case \"innkeeper\":\n        return formatMessage({ id: \"role.innkeeper.description\" });\n      case \"bard\":\n        return formatMessage({ id: \"role.bard.description\" });\n      case \"monk\":\n        return formatMessage({ id: \"role.monk.description\" });\n      case \"heremit\":\n        return formatMessage({ id: \"role.heremit.description\" });\n      case \"priest\":\n        return formatMessage({ id: \"role.priest.description\" });\n      case \"sinner\":\n        return formatMessage({ id: \"role.sinner.description\" });\n      case \"madman\":\n        return formatMessage({ id: \"role.madman.description\" });\n      case \"jester\":\n        return formatMessage({ id: \"role.jester.description\" });\n    }\n  };\n\n  return { formatName, formatDescription };\n}\n\nexport function useFormatFaction(): (faction: Faction) => string {\n  const { formatMessage } = useIntl();\n\n  const formatFaction = (faction: Faction) => {\n    switch (faction) {\n      case \"general\":\n        return formatMessage({ id: \"faction.general\" });\n      case \"wolf\":\n        return formatMessage({ id: \"faction.wolf\" });\n      case \"village\":\n        return formatMessage({ id: \"faction.village\" });\n    }\n  };\n\n  return formatFaction;\n}\n","import { Box, Typography } from \"@material-ui/core\";\nimport { array, option } from \"fp-ts\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Player, PlayerData } from \"../domain\";\nimport { SelectPlayer } from \"./SelectPlayer\";\nimport { Option } from \"fp-ts/Option\";\nimport { Reader } from \"fp-ts/Reader\";\nimport { ConfirmationDialog } from \"./Common/ConfirmationDialog\";\nimport { useFormatRole } from \"../utils\";\n\ntype Props = {\n  playersData: PlayerData[];\n  playersDiedThisNight: Player[];\n  onHealedByHealer: Reader<Player, void>;\n};\n\nexport function HealerNight(props: Props) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState<Option<Player>>(\n    option.none\n  );\n\n  const { formatName } = useFormatRole();\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\">\n      <Typography variant=\"h6\">\n        <FormattedMessage id={formatName(\"healer\")} />\n      </Typography>\n      {pipe(\n        props.playersData,\n        array.findFirst((v) => v.roleId === \"healer\"),\n        option.fold(\n          constant(\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"game.night.roleNotPresent\" />\n            </Typography>\n          ),\n          (healer) =>\n            healer.alive ? (\n              <Box\n                display=\"flex\"\n                width={1}\n                alignItems=\"center\"\n                flexDirection=\"column\"\n              >\n                <Typography variant=\"h4\">\n                  <FormattedMessage id=\"role.healer.name\" />\n                  {`: ${healer.player.name}`}\n                </Typography>\n                <Typography variant=\"h6\">\n                  <FormattedMessage id=\"game.night.healer.action\" />\n                </Typography>\n\n                <SelectPlayer\n                  players={pipe(\n                    props.playersDiedThisNight,\n                    array.filter((p) => p.name !== healer.player.name)\n                  )}\n                  onSelected={(p) => {\n                    setSelectedPlayer(option.some(p));\n                    setDialogOpen(true);\n                  }}\n                />\n                {pipe(\n                  selectedPlayer,\n                  option.map((v) => (\n                    <ConfirmationDialog\n                      open={dialogOpen}\n                      title={\n                        <FormattedMessage id=\"game.night.healer.confirmation.title\" />\n                      }\n                      content={\n                        <FormattedMessage\n                          id=\"game.night.healer.confirmation.content\"\n                          values={{ name: v.name }}\n                        />\n                      }\n                      onCancel={() => {\n                        setSelectedPlayer(option.none);\n                        setDialogOpen(false);\n                      }}\n                      onConfirm={() => {\n                        setSelectedPlayer(option.none);\n                        setDialogOpen(false);\n                        props.onHealedByHealer(v);\n                      }}\n                    />\n                  )),\n                  option.toNullable\n                )}\n              </Box>\n            ) : (\n              <Box display=\"flex\" width={1} flexDirection=\"column\">\n                <Typography variant=\"h6\">\n                  <FormattedMessage id=\"game.night.roleDied\" />\n                </Typography>\n              </Box>\n            )\n        )\n      )}\n    </Box>\n  );\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\";\nimport { IO } from \"fp-ts/IO\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Aura, Player } from \"../../domain\";\n\ntype Props = {\n  open: boolean;\n  player: Player;\n  aura: Aura;\n  onClose: IO<void>;\n};\n\nexport function ShowAuraDialog(props: Props) {\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>\n        <FormattedMessage\n          id=\"showAuraDialog.title\"\n          values={{ name: props.player.name }}\n        />\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          <FormattedMessage id={props.aura === \"dark\" ? \"dark\" : \"light\"} />\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={props.onClose} color=\"primary\">\n          <FormattedMessage id=\"close\" />\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { Box, Typography } from \"@material-ui/core\";\nimport { array, option } from \"fp-ts\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Player, PlayerData, roles } from \"../domain\";\nimport { SelectPlayer } from \"./SelectPlayer\";\nimport { Option } from \"fp-ts/Option\";\nimport { ShowAuraDialog } from \"./Common/ShowAuraDialog\";\nimport { useFormatRole } from \"../utils\";\n\ntype Props = {\n  playersData: PlayerData[];\n};\n\nexport function MediumNight(props: Props) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState<Option<Player>>(\n    option.none\n  );\n\n  const { formatName } = useFormatRole();\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\">\n      <Typography variant=\"h6\">\n        <FormattedMessage id={formatName(\"medium\")} />\n      </Typography>\n      {pipe(\n        props.playersData,\n        array.findFirst((v) => v.roleId === \"medium\"),\n        option.fold(\n          constant(\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"game.night.roleNotPresent\" />\n            </Typography>\n          ),\n          (seer) =>\n            seer.alive ? (\n              <Box\n                display=\"flex\"\n                width={1}\n                alignItems=\"center\"\n                flexDirection=\"column\"\n              >\n                <Typography variant=\"h4\">\n                  <FormattedMessage id=\"role.medium.name\" />\n                  {`: ${seer.player.name}`}\n                </Typography>\n                <Typography variant=\"h6\">\n                  <FormattedMessage id=\"game.night.medium.action\" />\n                </Typography>\n\n                <SelectPlayer\n                  players={pipe(\n                    props.playersData,\n                    array.filterMap((v) =>\n                      v.roleId !== \"medium\" && !v.alive\n                        ? option.some(v.player)\n                        : option.none\n                    )\n                  )}\n                  onSelected={(p) => {\n                    setSelectedPlayer(option.some(p));\n                    setDialogOpen(true);\n                  }}\n                />\n                {pipe(\n                  selectedPlayer,\n                  option.chain((p) =>\n                    pipe(\n                      props.playersData,\n                      array.findFirstMap((v) =>\n                        v.player.name === p.name\n                          ? option.some({\n                              player: v.player,\n                              aura: roles[v.roleId].aura,\n                            })\n                          : option.none\n                      )\n                    )\n                  ),\n                  option.map((v) => (\n                    <ShowAuraDialog\n                      open={dialogOpen}\n                      player={v.player}\n                      aura={v.aura}\n                      onClose={() => {\n                        setSelectedPlayer(option.none);\n                        setDialogOpen(false);\n                      }}\n                    />\n                  )),\n                  option.toNullable\n                )}\n              </Box>\n            ) : (\n              <Box display=\"flex\" width={1} flexDirection=\"column\">\n                <Typography variant=\"h6\">\n                  <FormattedMessage id=\"game.night.roleDied\" />\n                </Typography>\n              </Box>\n            )\n        )\n      )}\n    </Box>\n  );\n}\n","import { Box, Typography } from \"@material-ui/core\";\nimport { array, option } from \"fp-ts\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Aura, Player, PlayerData, roles } from \"../domain\";\nimport { SelectPlayer } from \"./SelectPlayer\";\nimport { Option } from \"fp-ts/Option\";\nimport { ShowAuraDialog } from \"./Common/ShowAuraDialog\";\nimport { Reader } from \"fp-ts/Reader\";\n\ntype Props = {\n  playersData: PlayerData[];\n  onSelectedAura: Reader<Aura, void>;\n};\n\nexport function SeerNight(props: Props) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState<Option<Player>>(\n    option.none\n  );\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\">\n      {pipe(\n        props.playersData,\n        array.findFirst((v) => v.roleId === \"seer\"),\n        option.fold(\n          constant(\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"game.night.roleNotPresent\" />\n            </Typography>\n          ),\n          (seer) =>\n            seer.alive ? (\n              <Box\n                display=\"flex\"\n                width={1}\n                alignItems=\"center\"\n                flexDirection=\"column\"\n              >\n                <Typography variant=\"h4\">\n                  <FormattedMessage id=\"role.seer.name\" />\n                  {`: ${seer.player.name}`}\n                </Typography>\n                <Typography variant=\"h6\">\n                  <FormattedMessage id=\"game.night.seer.action\" />\n                </Typography>\n\n                <SelectPlayer\n                  players={pipe(\n                    props.playersData,\n                    array.filterMap((v) =>\n                      v.roleId !== \"seer\" && v.alive\n                        ? option.some(v.player)\n                        : option.none\n                    )\n                  )}\n                  onSelected={(p) => {\n                    setSelectedPlayer(option.some(p));\n                    setDialogOpen(true);\n                  }}\n                />\n                {pipe(\n                  selectedPlayer,\n                  option.chain((p) =>\n                    pipe(\n                      props.playersData,\n                      array.findFirstMap((v) =>\n                        v.player.name === p.name\n                          ? option.some({\n                              player: v.player,\n                              aura: roles[v.roleId].aura,\n                            })\n                          : option.none\n                      )\n                    )\n                  ),\n                  option.map((v) => (\n                    <ShowAuraDialog\n                      open={dialogOpen}\n                      player={v.player}\n                      aura={v.aura}\n                      onClose={() => {\n                        setSelectedPlayer(option.none);\n                        setDialogOpen(false);\n                        props.onSelectedAura(v.aura);\n                      }}\n                    />\n                  )),\n                  option.toNullable\n                )}\n              </Box>\n            ) : (\n              <Box display=\"flex\" width={1} flexDirection=\"column\">\n                <Typography variant=\"h6\">\n                  <FormattedMessage id=\"game.night.roleDied\" />\n                </Typography>\n              </Box>\n            )\n        )\n      )}\n    </Box>\n  );\n}\n","import { Box, Typography } from \"@material-ui/core\";\nimport { array, option } from \"fp-ts\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Player, PlayerData } from \"../domain\";\nimport { SelectPlayer } from \"./SelectPlayer\";\nimport { Option } from \"fp-ts/Option\";\nimport { Reader } from \"fp-ts/Reader\";\nimport { ConfirmationDialog } from \"./Common/ConfirmationDialog\";\nimport { useFormatRole } from \"../utils\";\n\ntype Props = {\n  playersData: PlayerData[];\n  onProtectedByWitch: Reader<Player, void>;\n};\n\nexport function WitchNight(props: Props) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState<Option<Player>>(\n    option.none\n  );\n\n  const { formatName } = useFormatRole();\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\">\n      <Typography variant=\"h6\">\n        <FormattedMessage id={formatName(\"witch\")} />\n      </Typography>\n      {pipe(\n        props.playersData,\n        array.findFirst((v) => v.roleId === \"witch\"),\n        option.fold(\n          constant(\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"game.night.roleNotPresent\" />\n            </Typography>\n          ),\n          (witch) =>\n            witch.alive ? (\n              <Box\n                display=\"flex\"\n                width={1}\n                alignItems=\"center\"\n                flexDirection=\"column\"\n              >\n                <Typography variant=\"h4\">\n                  <FormattedMessage id=\"role.medium.name\" />\n                  {`: ${witch.player.name}`}\n                </Typography>\n                <Typography variant=\"h6\">\n                  <FormattedMessage id=\"game.night.healer.action\" />\n                </Typography>\n\n                <SelectPlayer\n                  players={pipe(\n                    props.playersData,\n                    array.filterMap((v) =>\n                      v.alive ? option.some(v.player) : option.none\n                    )\n                  )}\n                  onSelected={(p) => {\n                    setSelectedPlayer(option.some(p));\n                    setDialogOpen(true);\n                  }}\n                />\n                {pipe(\n                  selectedPlayer,\n                  option.map((v) => (\n                    <ConfirmationDialog\n                      open={dialogOpen}\n                      title={\n                        <FormattedMessage id=\"game.night.healer.confirmation.title\" />\n                      }\n                      content={\n                        <FormattedMessage\n                          id=\"game.night.healer.confirmation.content\"\n                          values={{ name: v.name }}\n                        />\n                      }\n                      onCancel={() => {\n                        setSelectedPlayer(option.none);\n                        setDialogOpen(false);\n                      }}\n                      onConfirm={() => {\n                        setSelectedPlayer(option.none);\n                        setDialogOpen(false);\n                        props.onProtectedByWitch(v);\n                      }}\n                    />\n                  )),\n                  option.toNullable\n                )}\n              </Box>\n            ) : (\n              <Box display=\"flex\" width={1} flexDirection=\"column\">\n                <Typography variant=\"h6\">\n                  <FormattedMessage id=\"game.night.roleDied\" />\n                </Typography>\n              </Box>\n            )\n        )\n      )}\n    </Box>\n  );\n}\n","import { Button, Dialog, DialogActions, DialogTitle } from \"@material-ui/core\";\nimport { IO } from \"fp-ts/IO\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Player } from \"../../domain\";\n\ntype Props = {\n  open: boolean;\n  player: Player;\n  mystical: boolean;\n  onClose: IO<void>;\n};\n\nexport function ShowMysticalDialog(props: Props) {\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>\n        <FormattedMessage\n          id={\n            props.mystical\n              ? \"showMysticalDialog.mystical\"\n              : \"showMysticalDialog.nonMystical\"\n          }\n          values={{ name: props.player.name }}\n        />\n      </DialogTitle>\n      <DialogActions>\n        <Button autoFocus onClick={props.onClose} color=\"primary\">\n          <FormattedMessage id=\"close\" />\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { Box, Typography } from \"@material-ui/core\";\nimport { array, option } from \"fp-ts\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Player, PlayerData, roles } from \"../domain\";\nimport { SelectPlayer } from \"./SelectPlayer\";\nimport { Option } from \"fp-ts/Option\";\nimport { ShowMysticalDialog } from \"./Common/ShowMysticalDialog\";\nimport { useFormatRole } from \"../utils\";\n\ntype Props = {\n  playersData: PlayerData[];\n};\n\nexport function WizardNight(props: Props) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState<Option<Player>>(\n    option.none\n  );\n\n  const { formatName } = useFormatRole();\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\">\n      <Typography variant=\"h6\">\n        <FormattedMessage id={formatName(\"wizard\")} />\n      </Typography>\n      {pipe(\n        props.playersData,\n        array.findFirst((v) => v.roleId === \"wizard\"),\n        option.fold(\n          constant(\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"game.night.roleNotPresent\" />\n            </Typography>\n          ),\n          (wizard) =>\n            wizard.alive ? (\n              <Box\n                display=\"flex\"\n                width={1}\n                alignItems=\"center\"\n                flexDirection=\"column\"\n              >\n                <Typography variant=\"h4\">\n                  <FormattedMessage id=\"role.wizard.name\" />\n                  {`: ${wizard.player.name}`}\n                </Typography>\n                <Typography variant=\"h6\">\n                  <FormattedMessage id=\"game.night.wizard.action\" />\n                </Typography>\n\n                <SelectPlayer\n                  players={pipe(\n                    props.playersData,\n                    array.filterMap((v) =>\n                      v.roleId !== \"wizard\" && v.alive\n                        ? option.some(v.player)\n                        : option.none\n                    )\n                  )}\n                  onSelected={(p) => {\n                    setSelectedPlayer(option.some(p));\n                    setDialogOpen(true);\n                  }}\n                />\n                {pipe(\n                  selectedPlayer,\n                  option.chain((p) =>\n                    pipe(\n                      props.playersData,\n                      array.findFirstMap((v) =>\n                        v.player.name === p.name\n                          ? option.some({\n                              player: v.player,\n                              mystical: roles[v.roleId].mystical,\n                            })\n                          : option.none\n                      )\n                    )\n                  ),\n                  option.map((v) => (\n                    <ShowMysticalDialog\n                      open={dialogOpen}\n                      player={v.player}\n                      mystical={v.mystical}\n                      onClose={() => {\n                        setSelectedPlayer(option.none);\n                        setDialogOpen(false);\n                      }}\n                    />\n                  )),\n                  option.toNullable\n                )}\n              </Box>\n            ) : (\n              <Box display=\"flex\" width={1} flexDirection=\"column\">\n                <Typography variant=\"h6\">\n                  <FormattedMessage id=\"game.night.roleDied\" />\n                </Typography>\n              </Box>\n            )\n        )\n      )}\n    </Box>\n  );\n}\n","import { Box, Typography } from \"@material-ui/core\";\nimport { array, option, nonEmptyArray } from \"fp-ts\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Player, PlayerData } from \"../domain\";\nimport { SelectPlayer } from \"./SelectPlayer\";\nimport { Option } from \"fp-ts/Option\";\nimport { wolves } from \"../gameplay\";\nimport { Reader } from \"fp-ts/Reader\";\nimport { ConfirmationDialog } from \"./Common/ConfirmationDialog\";\n\ntype Props = {\n  playersData: PlayerData[];\n  onAttackedByWolves: Reader<Player, void>;\n  doubleTurn: boolean;\n};\n\nexport function WolvesNight(props: Props) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState<Option<Player>>(\n    option.none\n  );\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\">\n      {pipe(\n        props.playersData,\n        array.filter(\n          (v) =>\n            pipe(\n              wolves,\n              array.findFirst((w) => w === v.roleId),\n              option.isSome\n            ) && v.alive\n        ),\n        nonEmptyArray.fromArray,\n        option.fold(\n          constant(\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"game.night.roleNotPresent\" />\n            </Typography>\n          ),\n          (wolves) => (\n            <Box\n              display=\"flex\"\n              width={1}\n              alignItems=\"center\"\n              flexDirection=\"column\"\n            >\n              <Typography variant=\"h4\">\n                <FormattedMessage id=\"faction.wolf\" />\n                {`: ${pipe(\n                  wolves,\n                  nonEmptyArray.map((w) => w.player.name)\n                ).join(\", \")}`}\n              </Typography>\n              <Typography variant=\"h6\">\n                <FormattedMessage\n                  id={\n                    props.doubleTurn\n                      ? \"game.night.wolves.action\"\n                      : \"game.night.wolves.action\"\n                  }\n                />\n              </Typography>\n\n              <SelectPlayer\n                players={pipe(\n                  props.playersData,\n                  array.filterMap((v) =>\n                    v.alive ? option.some(v.player) : option.none\n                  )\n                )}\n                onSelected={(p) => {\n                  setSelectedPlayer(option.some(p));\n                  setDialogOpen(true);\n                }}\n              />\n              {pipe(\n                selectedPlayer,\n                option.map((v) => (\n                  <ConfirmationDialog\n                    open={dialogOpen}\n                    title={\n                      <FormattedMessage id=\"game.night.wolves.confirmation.title\" />\n                    }\n                    content={\n                      <FormattedMessage\n                        id=\"game.night.wolves.confirmation.content\"\n                        values={{ name: v.name }}\n                      />\n                    }\n                    onCancel={() => {\n                      setSelectedPlayer(option.none);\n                      setDialogOpen(false);\n                    }}\n                    onConfirm={() => {\n                      setSelectedPlayer(option.none);\n                      setDialogOpen(false);\n                      props.onAttackedByWolves(v);\n                    }}\n                  />\n                )),\n                option.toNullable\n              )}\n            </Box>\n          )\n        )\n      )}\n    </Box>\n  );\n}\n","import {\n  Box,\n  Button,\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  Typography,\n} from \"@material-ui/core\";\nimport { IO } from \"fp-ts/IO\";\nimport { useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Player } from \"../domain\";\n\ntype Props = {\n  player: Player;\n  onHero: IO<void>;\n  onNormal: IO<void>;\n  onWolf: IO<void>;\n};\n\nexport function FarmerDeadDecisionDialog(props: Props) {\n  const [showWolves, setShowWolves] = useState(false);\n\n  return (\n    <Dialog open={true}>\n      <DialogTitle>\n        <FormattedMessage\n          id=\"farmerDeadDialog.title\"\n          values={{ name: props.player.name }}\n        />\n      </DialogTitle>\n      <DialogContent>\n        {!showWolves ? (\n          <Box display=\"flex\" width={1} flexDirection=\"column\">\n            <Button onClick={props.onNormal} color=\"primary\">\n              <FormattedMessage id=\"farmerDeadDialog.killButton\" />\n            </Button>\n            <Button onClick={props.onHero} color=\"primary\">\n              <FormattedMessage id=\"farmerDeadDialog.heroButton\" />\n            </Button>\n            <Button onClick={() => setShowWolves(true)} color=\"primary\">\n              <FormattedMessage id=\"farmerDeadDialog.wolfDescendant\" />\n            </Button>\n          </Box>\n        ) : (\n          <Box display=\"flex\" width={1} flexDirection=\"column\">\n            <Typography variant=\"h6\">\n              <FormattedMessage\n                id=\"farmerDeadDialog.showWolves\"\n                values={{ name: props.player.name }}\n              />\n            </Typography>\n            <Button onClick={props.onWolf} color=\"primary\">\n              <FormattedMessage id=\"close\" />\n            </Button>\n          </Box>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import {\n  Box,\n  Button,\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  Typography,\n} from \"@material-ui/core\";\nimport { IO } from \"fp-ts/IO\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Player } from \"../domain\";\n\ntype Props = {\n  player: Player;\n  onClose: IO<void>;\n};\n\nexport function TraitorDialog(props: Props) {\n  return (\n    <Dialog open={true}>\n      <DialogTitle>\n        <FormattedMessage\n          id=\"farmerDeadDialog.title\"\n          values={{ name: props.player.name }}\n        />\n      </DialogTitle>\n      <DialogContent>\n        <Box display=\"flex\" width={1} flexDirection=\"column\">\n          <Typography variant=\"h6\">\n            <FormattedMessage\n              id=\"traitorDialog.showWolves\"\n              values={{ name: props.player.name }}\n            />\n          </Typography>\n          <Button onClick={props.onClose} color=\"primary\">\n            <FormattedMessage id=\"close\" />\n          </Button>\n        </Box>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { Box, Typography } from \"@material-ui/core\";\nimport { array, option, number, ord } from \"fp-ts\";\nimport { constant, constNull, pipe } from \"fp-ts/function\";\nimport { Reader } from \"fp-ts/Reader\";\nimport { useState } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Aura, Player, PlayerData } from \"../domain\";\nimport {\n  firstNightTurns,\n  foldNightAction,\n  nightTurns,\n  wolves,\n  wolvesHierarchy,\n} from \"../gameplay\";\nimport { Stepper } from \"./Common/Stepper\";\nimport { HealerNight } from \"./HealerNight\";\nimport { MediumNight } from \"./MediumNight\";\nimport { SeerNight } from \"./SeerNight\";\nimport { WitchNight } from \"./WitchNight\";\nimport { WizardNight } from \"./WizardNight\";\nimport { WolvesNight } from \"./WolvesNight\";\nimport { Option } from \"fp-ts/Option\";\nimport { FarmerDeadDecisionDialog } from \"./FarmerDeadDecisionDialog\";\nimport { TraitorDialog } from \"./TraitorDialog\";\n\ntype Props = {\n  playersData: PlayerData[];\n  nightNumber: number;\n  wolvesDoubleAttack: boolean;\n  onNightResult: Reader<\n    {\n      killedPlayers: Player[];\n      farmerIntoWolf: Option<Player>;\n      healerUseHisAbility: boolean;\n      findAura: Option<Aura>;\n    },\n    void\n  >;\n};\n\nexport function Night(props: Props) {\n  const [killedPlayers, setKilledPlayers] = useState<Player[]>([]);\n  const [findAura, setFindAura] = useState<Option<Aura>>(option.none);\n  const [showFarmerDecision, setShowFarmerDecision] = useState<Option<Player>>(\n    option.none\n  );\n  const [showTraitorDialog, setShowTraitorDialog] = useState<Option<Player>>(\n    option.none\n  );\n  const [farmerIntoWolf, setFarmerIntoWolf] = useState<Option<Player>>(\n    option.none\n  );\n  const [healerUseHisAbility, setHealerUseHisAbility] = useState(false);\n\n  return (\n    <Box display=\"flex\" width={1} alignItems=\"center\" flexDirection=\"column\">\n      <Box mt={2}>\n        <Typography variant=\"h5\">\n          <FormattedMessage id=\"game.night.title\" />\n        </Typography>\n      </Box>\n      <Box mt={2} width={1}>\n        <Stepper\n          lastScreen={\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"game.showRole.finish\" />\n            </Typography>\n          }\n          collection={props.nightNumber === 1 ? firstNightTurns : nightTurns}\n          content={foldNightAction({\n            whenSeer: () => (\n              <SeerNight\n                playersData={props.playersData}\n                onSelectedAura={(a) => setFindAura(option.some(a))}\n              />\n            ),\n            whenWolves: () => (\n              <Box display=\"flex\" width={1} flexDirection=\"column\">\n                <WolvesNight\n                  playersData={pipe(\n                    props.playersData,\n                    array.filter((p) =>\n                      pipe(\n                        killedPlayers,\n                        array.findFirst((pa) => pa.name === p.player.name),\n                        option.isNone\n                      )\n                    )\n                  )}\n                  doubleTurn={props.wolvesDoubleAttack}\n                  onAttackedByWolves={(pa) => {\n                    const heremit = pipe(\n                      props.playersData,\n                      array.findFirst((p) => p.roleId === \"heremit\"),\n                      option.chain((p) =>\n                        pa.name === p.player.name ? option.some(p) : option.none\n                      )\n                    );\n\n                    const traitor = pipe(\n                      props.playersData,\n                      array.findFirst((p) => p.roleId === \"traitor\"),\n                      option.chain((p) =>\n                        pa.name === p.player.name ? option.some(p) : option.none\n                      )\n                    );\n\n                    const farmer = pipe(\n                      props.playersData,\n                      array.findFirst(\n                        (p) => p.roleId === \"farmer1\" || p.roleId === \"farmer2\"\n                      ),\n                      option.chain((p) =>\n                        pa.name === p.player.name ? option.some(p) : option.none\n                      )\n                    );\n\n                    if (option.isNone(heremit)) {\n                      pipe(\n                        farmer,\n                        option.fold(\n                          () =>\n                            pipe(\n                              traitor,\n                              option.fold(\n                                () => setKilledPlayers([...killedPlayers, pa]),\n                                (farmer) =>\n                                  setShowTraitorDialog(\n                                    option.some(farmer.player)\n                                  )\n                              )\n                            ),\n                          (farmer) =>\n                            setShowFarmerDecision(option.some(farmer.player))\n                        )\n                      );\n                    }\n                  }}\n                />\n                {pipe(\n                  showFarmerDecision,\n                  option.fold(constNull, (farmer) => (\n                    <FarmerDeadDecisionDialog\n                      player={farmer}\n                      onHero={() => {\n                        const bestWolf = pipe(\n                          props.playersData,\n                          array.filter(\n                            (v) =>\n                              pipe(\n                                wolves,\n                                array.findFirst((w) => w === v.roleId),\n                                option.isSome\n                              ) && v.alive\n                          ),\n                          array.sortBy([\n                            pipe(\n                              number.Ord,\n                              ord.contramap((p: PlayerData) =>\n                                wolvesHierarchy(p.roleId)\n                              )\n                            ),\n                          ]),\n                          array.head\n                        );\n                        setKilledPlayers([\n                          ...killedPlayers,\n                          farmer,\n                          ...pipe(\n                            bestWolf,\n                            option.fold(constant([]), (wolf) => [wolf.player])\n                          ),\n                        ]);\n                        setShowFarmerDecision(option.none);\n                      }}\n                      onNormal={() => {\n                        setKilledPlayers([...killedPlayers, farmer]);\n                        setShowFarmerDecision(option.none);\n                      }}\n                      onWolf={() => {\n                        setFarmerIntoWolf(option.some(farmer));\n                        setShowFarmerDecision(option.none);\n                      }}\n                    />\n                  ))\n                )}\n                {pipe(\n                  showTraitorDialog,\n                  option.fold(constNull, (traitor) => (\n                    <TraitorDialog\n                      player={traitor}\n                      onClose={() => setShowTraitorDialog(option.none)}\n                    />\n                  ))\n                )}\n              </Box>\n            ),\n            whenWizard: () => <WizardNight playersData={props.playersData} />,\n            whenMedium: () => <MediumNight playersData={props.playersData} />,\n            whenWitch: () => (\n              <WitchNight\n                playersData={props.playersData}\n                onProtectedByWitch={(t) =>\n                  setKilledPlayers(\n                    pipe(\n                      killedPlayers,\n                      array.filter((p) => p.name !== t.name)\n                    )\n                  )\n                }\n              />\n            ),\n            whenHealer: () => (\n              <HealerNight\n                playersData={props.playersData}\n                playersDiedThisNight={killedPlayers}\n                onHealedByHealer={(t) => {\n                  setKilledPlayers(\n                    pipe(\n                      killedPlayers,\n                      array.filter((pa) => pa.name !== t.name)\n                    )\n                  );\n                  setHealerUseHisAbility(true);\n                }}\n              />\n            ),\n          })}\n          onProceed={() =>\n            props.onNightResult({\n              killedPlayers,\n              farmerIntoWolf,\n              healerUseHisAbility,\n              findAura: findAura,\n            })\n          }\n        />\n      </Box>\n    </Box>\n  );\n}\n","import { Box, Button, Typography } from \"@material-ui/core\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { nonEmptyArray, option } from \"fp-ts\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Player } from \"../domain\";\nimport { IO } from \"fp-ts/IO\";\n\ntype Props = {\n  playerKilled: Player[];\n  newsFromInn: boolean;\n  newsFromBard: boolean;\n  onProceedWithVoting: IO<void>;\n};\n\nexport function NightRecapAndDiscussion(props: Props) {\n  return (\n    <Box display=\"flex\" width={1} alignItems=\"center\" flexDirection=\"column\">\n      <Box mt={2}>\n        <Typography variant=\"h5\">\n          <FormattedMessage id=\"game.nightRecapAndDiscussion.title\" />\n        </Typography>\n      </Box>\n      <Box mt={2} width={1} flexDirection=\"column\">\n        <Typography variant=\"h5\">\n          <FormattedMessage id=\"game.nightRecapAndDiscussion.playerKilled\" />\n        </Typography>\n        {pipe(\n          props.playerKilled,\n          nonEmptyArray.fromArray,\n          option.fold(\n            constant(\n              <Typography variant=\"h5\">\n                <FormattedMessage id=\"game.nightRecapAndDiscussion.noPlayerKilled\" />\n              </Typography>\n            ),\n            (players) => <span>{players.map((p) => p.name).join(\", \")}</span>\n          )\n        )}\n\n        {props.newsFromInn && (\n          <Typography variant=\"h5\">\n            <FormattedMessage id=\"game.nightRecapAndDiscussion.newsFromInn\" />\n          </Typography>\n        )}\n        {props.newsFromBard && (\n          <Typography variant=\"h5\">\n            <FormattedMessage id=\"game.nightRecapAndDiscussion.newsFromBard\" />\n          </Typography>\n        )}\n      </Box>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={props.onProceedWithVoting}\n      >\n        <FormattedMessage id=\"start\" />\n      </Button>\n    </Box>\n  );\n}\n","import { Type } from \"io-ts\";\nimport { Option } from \"fp-ts/Option\";\nimport { flow, pipe } from \"fp-ts/function\";\nimport { either, json, option } from \"fp-ts\";\nimport { failure } from \"io-ts/lib/PathReporter\";\nimport { Either } from \"fp-ts/Either\";\n\nexport function getValue<T, TT>(key: string, codec: Type<T, TT>): Option<T> {\n  return pipe(\n    localStorage.getItem(key),\n    option.fromNullable,\n    option.chain(\n      flow(\n        json.parse,\n        either.mapLeft((e) => {\n          console.error(\"Json parse error: \", e);\n          return e;\n        }),\n        either.chainW(\n          flow(\n            codec.decode,\n            either.mapLeft((e) => {\n              console.error(\"Decoding error: \", failure(e).join(\"\\n\"));\n              return e;\n            })\n          )\n        ),\n        option.fromEither\n      )\n    )\n  );\n}\n\nexport function setValue<T, TT>(\n  key: string,\n  codec: Type<T, TT>,\n  value: T\n): Either<unknown, void> {\n  return pipe(\n    value,\n    codec.encode,\n    json.stringify,\n    either.bimap(\n      (e) => {\n        console.error(e);\n        return e;\n      },\n      (encodedValue) => localStorage.setItem(key, encodedValue)\n    )\n  );\n}\n","import { Player } from \"../domain\";\nimport * as t from \"io-ts\";\nimport { getValue } from \"../localStorage\";\nimport { useState } from \"react\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { array, option } from \"fp-ts\";\nimport { Avatar, Box, Button, Chip, Grid, Typography } from \"@material-ui/core\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Reader } from \"fp-ts/Reader\";\n\ntype Props = {\n  onNext: Reader<Player[], void>;\n};\n\nconst minAmount = 4;\n\nexport function SelectPlayers(props: Props) {\n  const [players, setPlayers] = useState(\n    pipe(\n      getValue(\"players\", t.array(Player)),\n      option.map((players) =>\n        pipe(\n          players,\n          array.map((p) => ({ player: p, selected: false }))\n        )\n      )\n    )\n  );\n\n  const amount = pipe(\n    players,\n    option.map(\n      (p) =>\n        pipe(\n          p,\n          array.filter((v) => v.selected)\n        ).length\n    ),\n    option.getOrElse(constant(0))\n  );\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\" m={4}>\n      <Typography variant=\"h6\">\n        <FormattedMessage\n          id=\"game.players.playerNumber\"\n          values={{\n            amount,\n            minAmount,\n          }}\n        />\n      </Typography>\n      <Box display=\"flex\" width={1} flexDirection=\"column\" m={4}>\n        {pipe(\n          players,\n          option.fold(\n            constant(\n              <Typography variant=\"h3\">\n                <FormattedMessage id=\"game.players.noPlayersDefined\" />\n              </Typography>\n            ),\n            (players) => (\n              <Grid\n                container\n                justifyContent=\"center\"\n                alignItems=\"center\"\n                spacing={2}\n              >\n                {players.map((value) => {\n                  return (\n                    <Grid\n                      key={value.player.name}\n                      justifyContent=\"center\"\n                      alignItems=\"center\"\n                      container\n                      item\n                      xs={4}\n                      sm={3}\n                      md={2}\n                      lg={1}\n                    >\n                      <Chip\n                        label={value.player.name}\n                        avatar={<Avatar>{value.player.name[0]}</Avatar>}\n                        clickable\n                        color=\"primary\"\n                        onClick={() =>\n                          setPlayers(\n                            pipe(\n                              players,\n                              array.findIndex(\n                                (p) => p.player.name === value.player.name\n                              ),\n                              option.chain((index) =>\n                                pipe(\n                                  players,\n                                  array.modifyAt(index, (p) => ({\n                                    ...p,\n                                    selected: !p.selected,\n                                  }))\n                                )\n                              )\n                            )\n                          )\n                        }\n                        variant={value.selected ? \"default\" : \"outlined\"}\n                      />\n                    </Grid>\n                  );\n                })}\n              </Grid>\n            )\n          )\n        )}\n      </Box>\n\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={() =>\n          props.onNext(\n            pipe(\n              players,\n              option.map((players) =>\n                pipe(\n                  players,\n                  array.filterMap((p) =>\n                    p.selected ? option.some(p.player) : option.none\n                  )\n                )\n              ),\n              option.getOrElse<Player[]>(constant([]))\n            )\n          )\n        }\n        disabled={amount < minAmount}\n      >\n        <FormattedMessage id=\"next\" />\n      </Button>\n    </Box>\n  );\n}\n","import { SvgIcon, SvgIconProps } from \"@material-ui/core\";\n\nexport function DarkAuraIcon(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M12 1.5c-5.398 0-9.75 4.352-9.75 9.602v4.273a2.53 2.53 0 002.55 2.55c.45 0 1.2.223 1.2.825V21c0 .3.227.602.523.75 1.801.602 3.676.898 5.477.898 1.8 0 3.676-.296 5.477-.898.296-.074.523-.375.523-.75v-2.25c0-.602.75-.824 1.2-.824a2.53 2.53 0 002.55-2.551v-4.273c0-5.25-4.352-9.602-9.75-9.602zM9.227 16.273l-.903.153c-.148 0-.3.074-.523.074-.602 0-1.125-.227-1.653-.602a2.666 2.666 0 01-.898-1.949v-.148A2.53 2.53 0 017.8 11.25h.9c.823 0 1.5.375 2.027.977.449.597.671 1.421.449 2.171-.227.977-1.051 1.653-1.95 1.875zm3.824 1.653c-.074.074-.153.074-.301.074-.3 0-.523-.148-.676-.45L12 17.399l-.074.153c-.153.375-.602.523-.977.3-.375-.152-.523-.601-.3-.976l.75-1.5c.226-.523 1.05-.523 1.351 0l.75 1.5c.074.375-.074.824-.45 1.05zm5.699-3.977c0 .75-.375 1.5-.898 1.95a2.632 2.632 0 01-1.653.601c-.148 0-.3 0-.523-.074l-.903-.153c-.972-.222-1.722-.898-1.949-1.875-.222-.75 0-1.574.45-2.171.453-.602 1.203-.977 2.027-.977h.898a2.53 2.53 0 012.551 2.55zm0 0\"></path>\n    </SvgIcon>\n  );\n}\n","import { SvgIcon, SvgIconProps } from \"@material-ui/core\";\n\nexport function MysticalIcon(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <g>\n        <path d=\"M23.887 11.586c-.192-.316-4.742-7.75-11.887-7.75-7.145 0-11.695 7.434-11.887 7.75a.807.807 0 000 .828c.192.316 4.742 7.75 11.887 7.75 7.145 0 11.695-7.434 11.887-7.75a.807.807 0 000-.828zM12 18.559c-5.336 0-9.21-5.063-10.238-6.559C2.789 10.5 6.652 5.441 12 5.441c5.336 0 9.21 5.063 10.238 6.559-1.027 1.5-4.89 6.559-10.238 6.559zm0 0\"></path>\n        <path d=\"M12 6.598A5.406 5.406 0 006.598 12 5.409 5.409 0 0012 17.402 5.411 5.411 0 0017.402 12 5.406 5.406 0 0012 6.598zm0 9.199A3.801 3.801 0 018.203 12c0-2.094 1.703-3.8 3.797-3.8a3.804 3.804 0 013.797 3.8A3.801 3.801 0 0112 15.797zm0 0\"></path>\n        <path d=\"M12 9.93c-1.145 0-2.07.925-2.07 2.07 0 1.145.925 2.07 2.07 2.07 1.145 0 2.07-.925 2.07-2.07 0-1.145-.925-2.07-2.07-2.07zm0 0\"></path>\n      </g>\n    </SvgIcon>\n  );\n}\n","import { Box, Card, CardContent, Typography } from \"@material-ui/core\";\nimport { Role } from \"../domain\";\nimport { DarkAuraIcon } from \"../Icons/DarkAuraIcon\";\nimport { MysticalIcon } from \"../Icons/MysticalIcon\";\nimport { useFormatRole } from \"../utils\";\n\ntype Props = {\n  role: Role;\n};\n\nexport function RoleCard(props: Props) {\n  const { formatName, formatDescription } = useFormatRole();\n  return (\n    <Card>\n      <CardContent>\n        <Box display=\"flex\" width={1} flexDirection=\"row\">\n          <Box display=\"flex\" width={1}>\n            <Typography gutterBottom variant=\"h5\">\n              {formatName(props.role.id)}\n            </Typography>\n          </Box>\n          <Box display=\"flex\" alignItems=\"center\">\n            {props.role.aura === \"dark\" && <DarkAuraIcon />}\n            {props.role.mystical && <MysticalIcon />}\n          </Box>\n        </Box>\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          {formatDescription(props.role.id)}\n        </Typography>\n      </CardContent>\n    </Card>\n  );\n}\n","import { Box, Typography } from \"@material-ui/core\";\nimport { IO } from \"fp-ts/IO\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { FormattedMessage } from \"react-intl\";\nimport { PlayerData, roles } from \"../domain\";\nimport { foldShowRoleAction } from \"../gameplay\";\nimport { Stepper } from \"./Common/Stepper\";\nimport { RoleCard } from \"./RoleCard\";\nimport { array, option } from \"fp-ts\";\n\ntype Props = {\n  playersData: PlayerData[];\n  onStartGame: IO<void>;\n};\n\nexport function ShowRole(props: Props) {\n  return (\n    <Box display=\"flex\" width={1} alignItems=\"center\" flexDirection=\"column\">\n      <Box mt={2}>\n        <Typography variant=\"h5\">\n          <FormattedMessage id=\"game.showRole.title\" />\n        </Typography>\n      </Box>\n      <Box mt={2}>\n        <Stepper\n          lastScreen={\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"game.showRole.finish\" />\n            </Typography>\n          }\n          collection={props.playersData}\n          content={(playerData) => (\n            <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n              <Box mb={2}>\n                <Typography variant=\"h6\">{playerData.player.name}</Typography>\n              </Box>\n              <Box display=\"flex\" width={1}>\n                <RoleCard role={roles[playerData.roleId]} />\n              </Box>\n              {pipe(\n                { roleId: playerData.roleId, playersData: props.playersData },\n                foldShowRoleAction({\n                  whenWolves: option.fold(\n                    constant(\n                      <Box mb={2}>\n                        <Typography variant=\"h6\">\n                          <FormattedMessage id=\"game.showRole.noTraitor\" />\n                        </Typography>\n                      </Box>\n                    ),\n                    (traitor) => (\n                      <Box\n                        display=\"flex\"\n                        flexDirection=\"column\"\n                        alignItems=\"center\"\n                      >\n                        <Box mb={2}>\n                          <Typography variant=\"h6\">\n                            <FormattedMessage\n                              id=\"game.showRole.traitor\"\n                              values={{ name: traitor.name }}\n                            />\n                          </Typography>\n                        </Box>\n                        <Box display=\"flex\" width={1}>\n                          <RoleCard role={roles.traitor} />\n                        </Box>\n                      </Box>\n                    )\n                  ),\n                  whenMonk: option.fold(\n                    constant(\n                      <Box mb={2}>\n                        <Typography variant=\"h6\">\n                          <FormattedMessage id=\"game.showRole.noMissingRole\" />\n                        </Typography>\n                      </Box>\n                    ),\n                    (missingRoles) => (\n                      <Box mb={2}>\n                        <Typography variant=\"h6\">\n                          <FormattedMessage\n                            id=\"game.showRole.missingRole\"\n                            values={{ amount: missingRoles.length }}\n                          />\n                        </Typography>\n                        {pipe(\n                          missingRoles,\n                          array.map((r) => (\n                            <Box display=\"flex\" width={1} mt={2}>\n                              <RoleCard role={r} />\n                            </Box>\n                          ))\n                        )}\n                      </Box>\n                    )\n                  ),\n                  whenPriest: option.fold(\n                    constant(\n                      <Box mb={2}>\n                        <Typography variant=\"h6\">\n                          <FormattedMessage id=\"game.showRole.noSinner\" />\n                        </Typography>\n                      </Box>\n                    ),\n                    (sinner) => (\n                      <Box\n                        display=\"flex\"\n                        flexDirection=\"column\"\n                        alignItems=\"center\"\n                      >\n                        <Box mb={2}>\n                          <Typography variant=\"h6\">\n                            <FormattedMessage\n                              id=\"game.showRole.sinner\"\n                              values={{ name: sinner.name }}\n                            />\n                          </Typography>\n                        </Box>\n                        <Box display=\"flex\" width={1}>\n                          <RoleCard role={roles.sinner} />\n                        </Box>\n                      </Box>\n                    )\n                  ),\n                })\n              )}\n            </Box>\n          )}\n          onProceed={props.onStartGame}\n        />\n      </Box>\n    </Box>\n  );\n}\n","import { end, format, lit, parse, Route, zero } from \"fp-ts-routing\";\nimport { initializeRouter, Routing } from \"./Router/RouterProvider\";\n\ninterface Home {\n  readonly _tag: \"Home\";\n}\n\ninterface Roles {\n  readonly _tag: \"Roles\";\n}\n\ninterface Game {\n  readonly _tag: \"Game\";\n}\n\ninterface Players {\n  readonly _tag: \"Players\";\n}\n\nexport type Location = Home | Roles | Game | Players;\n\nconst home: Home = { _tag: \"Home\" };\nconst roles: Roles = { _tag: \"Roles\" };\nconst game: Game = { _tag: \"Game\" };\nconst players: Players = { _tag: \"Players\" };\n\nexport const locations = {\n  home,\n  roles,\n  game,\n  players,\n};\n\nconst defaults = end;\nconst rolesMatch = lit(\"roles\").then(end);\nconst gameMatch = lit(\"game\").then(end);\nconst playersMatch = lit(\"players\").then(end);\n\nconst router = zero<Location>()\n  .alt(defaults.parser.map(() => home))\n  .alt(rolesMatch.parser.map(() => roles))\n  .alt(gameMatch.parser.map(() => game))\n  .alt(playersMatch.parser.map(() => players));\n\nfunction parseLocation(s: string): Location {\n  return parse(router, Route.parse(s), home);\n}\n\nfunction formatLocation(l: Location): string {\n  switch (l._tag) {\n    case \"Home\":\n      return format(defaults.formatter, l);\n    case \"Roles\":\n      return format(rolesMatch.formatter, l);\n    case \"Game\":\n      return format(gameMatch.formatter, l);\n    case \"Players\":\n      return format(playersMatch.formatter, l);\n  }\n}\n\nexport const routing: Routing<Location> = {\n  formatLocation,\n  parseLocation,\n};\n\nexport const { RouterProvider, useRouter } = initializeRouter<Location>();\n","import {\n  createContext,\n  useEffect,\n  useState,\n  useContext,\n  Dispatch,\n  SetStateAction,\n} from \"react\";\nimport { Option } from \"fp-ts/Option\";\nimport { array, option, string, nonEmptyArray } from \"fp-ts\";\nimport { constant, pipe } from \"fp-ts/function\";\n\ninterface ILocation {\n  readonly _tag: string;\n}\n\ninterface ILocationFoldable<K extends string> {\n  readonly _tag: K;\n}\n\nexport function foldLocation<\n  K extends string,\n  T extends ILocationFoldable<K>,\n  R\n>(\n  matches: {\n    [L in T[\"_tag\"]]: (args: Omit<Extract<T, { _tag: L }>, \"_tag\">) => R;\n  }\n): (location: T) => R {\n  return (location) => matches[location._tag](location as any);\n}\n\nexport type Routing<T extends ILocation> = {\n  formatLocation: (l: T) => string;\n  parseLocation: (s: string) => T;\n};\n\ntype Props<T extends ILocation> = {\n  routing: Routing<T>;\n  basepath: Option<string>;\n  useHashHistory?: boolean;\n  children: JSX.Element;\n};\n\nexport function initializeRouter<T extends ILocation>() {\n  const RouterContext = createContext<\n    Option<{\n      routing: Routing<T>;\n      location: T;\n      setLocation: Dispatch<SetStateAction<T>>;\n    }>\n  >(option.none);\n\n  const RouterProvider = (props: Props<T>) => {\n    const skipN = pipe(\n      props.basepath,\n      option.map((b) => b.split(\"/\").length + 1),\n      option.getOrElse(constant(0))\n    );\n\n    const pathname = props.useHashHistory\n      ? pipe(\n          window.location.pathname +\n            window.location.search +\n            window.location.hash,\n          string.replace(\"#\", \"\")\n        )\n      : window.location.pathname;\n\n    const getPathname = () =>\n      pipe(\n        pathname,\n        string.split(\"/\"),\n        nonEmptyArray.fromReadonlyNonEmptyArray,\n        array.dropLeft(skipN)\n      ).join(\"/\");\n\n    const [location, setLocation] = useState(\n      props.routing.parseLocation(getPathname())\n    );\n\n    const handleLocationChanges = () => {\n      setLocation(props.routing.parseLocation(getPathname()));\n    };\n\n    useEffect(() => {\n      window.addEventListener(\"popstate\", handleLocationChanges);\n\n      return () => {\n        window.removeEventListener(\"popstate\", handleLocationChanges);\n      };\n    });\n\n    const formatLocation = (l: T) =>\n      pipe(\n        props.basepath,\n        option.map((b) => \"/\" + b),\n        option.getOrElse(constant(\"\"))\n      ) +\n      (props.useHashHistory ? \"/#\" : \"\") +\n      props.routing.formatLocation(l);\n\n    const internalRouting = {\n      parseLocation: props.routing.parseLocation,\n      formatLocation,\n    };\n\n    return (\n      <RouterContext.Provider\n        value={option.some({ routing: internalRouting, location, setLocation })}\n      >\n        {props.children}\n      </RouterContext.Provider>\n    );\n  };\n\n  const useRouter = () => {\n    const ctx = useContext(RouterContext);\n\n    if (option.isNone(ctx)) {\n      throw new Error(\"RouterContext not provided\");\n    }\n\n    const navigateTo = (location: T) => {\n      const newLocation = ctx.value.routing.formatLocation(location);\n      console.log(newLocation);\n      window.history.pushState(null, \"\", newLocation);\n      window.scrollTo(0, 0);\n      ctx.value.setLocation(location);\n    };\n\n    const back = () => {\n      window.history.back();\n    };\n\n    return { current: ctx.value.location, navigateTo, back };\n  };\n\n  return { RouterProvider, useRouter };\n}\n","import { Aura, GameData, Player, PlayerData } from \"../domain\";\nimport { generatePlayersData } from \"../gameplay\";\nimport { setValue } from \"../localStorage\";\nimport { Option } from \"fp-ts/Option\";\nimport { pipe, constant, constFalse } from \"fp-ts/function\";\nimport { array, option } from \"fp-ts\";\n\nexport type State =\n  | {\n      view: \"init\";\n      gameData: GameData;\n    }\n  | {\n      view: \"selectPlayers\";\n    }\n  | { view: \"showRole\"; gameData: GameData }\n  | {\n      view: \"night\";\n      gameData: GameData;\n    }\n  | {\n      view: \"nightRecapAndDiscussion\";\n      gameData: GameData;\n      newsFromBard: boolean;\n      newsFromInn: boolean;\n      playerKilled: Player[];\n    };\n\ntype Action =\n  | { type: \"startFreshGame\" }\n  | {\n      type: \"assignRoleToPlayer\";\n      payload: Player[];\n    }\n  | {\n      type: \"startNight\";\n    }\n  | {\n      type: \"endNight\";\n      payload: {\n        killedPlayers: Player[];\n        farmerIntoWolf: Option<Player>;\n        healerUseHisAbility: boolean;\n        findAura: Option<Aura>;\n      };\n    }\n  | {\n      type: \"resumeGame\";\n      payload: GameData;\n    };\n\nexport function reducer(state: State, action: Action): State {\n  switch (action.type) {\n    case \"startFreshGame\":\n      return { view: \"selectPlayers\" };\n    case \"assignRoleToPlayer\":\n      const playersData = generatePlayersData(action.payload);\n      const gameData: GameData = {\n        phase: \"showRole\",\n        playersData,\n        nightNumber: 1,\n        farmerTurnedIntoWolves: [],\n        healerUseHisAbility: false,\n        lastTurn: option.none,\n      };\n      setValue(\"gameData\", GameData, gameData);\n      return {\n        view: \"showRole\",\n        gameData: gameData,\n      };\n    case \"startNight\":\n      if (state.view === \"showRole\") {\n        const gameData: GameData = {\n          ...state.gameData,\n          phase: \"night\",\n        };\n        setValue(\"gameData\", GameData, gameData);\n        return {\n          view: \"night\",\n          gameData: gameData,\n        };\n      } else {\n        return state;\n      }\n    case \"endNight\":\n      if (state.view === \"night\") {\n        const gameData: GameData = {\n          ...state.gameData,\n          playersData: pipe(\n            state.gameData.playersData,\n            array.map((pd) =>\n              pipe(\n                action.payload.killedPlayers,\n                array.findFirst((p) => p.name === pd.player.name),\n                option.fold(\n                  constant(pd),\n                  constant({\n                    ...pd,\n                    alive: false,\n                    killedDuringNightNumber: state.gameData.nightNumber,\n                  })\n                )\n              )\n            )\n          ),\n          healerUseHisAbility: action.payload.healerUseHisAbility,\n          farmerTurnedIntoWolves: pipe(\n            action.payload.farmerIntoWolf,\n            option.fold(\n              constant([...state.gameData.farmerTurnedIntoWolves]),\n              (farmerIntoWolf) => [\n                ...state.gameData.farmerTurnedIntoWolves,\n                farmerIntoWolf,\n              ]\n            )\n          ),\n          nightNumber: state.gameData.nightNumber + 1,\n          lastTurn: option.some({\n            killedDuringNight: action.payload.killedPlayers,\n            findAura: action.payload.findAura,\n            killedDuringDay: option.none,\n          }),\n          phase: \"nightRecapAndDiscussion\",\n        };\n        setValue(\"gameData\", GameData, gameData);\n        return {\n          view: \"nightRecapAndDiscussion\",\n          gameData: gameData,\n          playerKilled: action.payload.killedPlayers,\n          newsFromBard: pipe(\n            state.gameData.playersData,\n            array.findFirst((p) => p.roleId === \"bard\"),\n            option.map(() =>\n              pipe(\n                action.payload.findAura,\n                option.fold(constFalse, (a) => a === \"light\")\n              )\n            ),\n            option.getOrElse(constFalse)\n          ),\n          newsFromInn: pipe(\n            state.gameData.playersData,\n            array.findFirst((p) => p.roleId === \"innkeeper\"),\n            option.map(() =>\n              pipe(\n                action.payload.findAura,\n                option.fold(constFalse, (a) => a === \"dark\")\n              )\n            ),\n            option.getOrElse(constFalse)\n          ),\n        };\n      } else {\n        return state;\n      }\n    case \"resumeGame\":\n      switch (action.payload.phase) {\n        case \"showRole\":\n          return {\n            view: \"showRole\",\n            gameData: action.payload,\n          };\n        case \"night\":\n          return {\n            view: \"night\",\n            gameData: action.payload,\n          };\n        case \"nightRecapAndDiscussion\":\n          return {\n            view: \"nightRecapAndDiscussion\",\n            gameData: action.payload,\n            playerKilled: pipe(\n              action.payload.lastTurn,\n              option.map((l) => l.killedDuringNight),\n              option.getOrElse<Player[]>(constant([]))\n            ),\n            newsFromBard: pipe(\n              action.payload.playersData,\n              array.findFirst((p) => p.roleId === \"bard\"),\n              option.map(() =>\n                pipe(\n                  action.payload.lastTurn,\n                  option.chain((l) => l.findAura),\n                  option.fold(constFalse, (a) => a === \"light\")\n                )\n              ),\n              option.getOrElse(constFalse)\n            ),\n            newsFromInn: pipe(\n              action.payload.playersData,\n              array.findFirst((p) => p.roleId === \"innkeeper\"),\n              option.map(() =>\n                pipe(\n                  action.payload.lastTurn,\n                  option.chain((l) => l.findAura),\n                  option.fold(constFalse, (a) => a === \"dark\")\n                )\n              ),\n              option.getOrElse(constFalse)\n            ),\n          };\n      }\n      return state;\n  }\n}\n\nexport function foldStatus(match: {\n  whenInit: (gameData: GameData) => JSX.Element;\n  whenSelectPlayers: () => JSX.Element;\n  whenShowRole: (playerRoles: PlayerData[]) => JSX.Element;\n  whenNight: (playerRoles: PlayerData[], nightNumber: number) => JSX.Element;\n  whenNightRecapAndDiscussion: (\n    playerKilled: Player[],\n    newsFromInn: boolean,\n    newsFromBard: boolean\n  ) => JSX.Element;\n}): (state: State) => JSX.Element {\n  return (state) => {\n    switch (state.view) {\n      case \"init\":\n        return match.whenInit(state.gameData);\n      case \"selectPlayers\":\n        return match.whenSelectPlayers();\n      case \"showRole\":\n        return match.whenShowRole(state.gameData.playersData);\n      case \"night\":\n        return match.whenNight(\n          state.gameData.playersData,\n          state.gameData.nightNumber\n        );\n      case \"nightRecapAndDiscussion\":\n        return match.whenNightRecapAndDiscussion(\n          state.playerKilled,\n          state.newsFromInn,\n          state.newsFromBard\n        );\n    }\n  };\n}\n","import {\n  AppBar,\n  Box,\n  IconButton,\n  Toolbar,\n  Typography,\n} from \"@material-ui/core\";\nimport { ArrowBackSharp } from \"@material-ui/icons\";\nimport { option } from \"fp-ts\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { useReducer } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { ConfirmationDialog } from \"../blocks/Common/ConfirmationDialog\";\nimport { Night } from \"../blocks/Night\";\nimport { NightRecapAndDiscussion } from \"../blocks/NightRecapAndDiscussion\";\nimport { SelectPlayers } from \"../blocks/SelectPlayers\";\nimport { ShowRole } from \"../blocks/ShowRole\";\nimport { GameData } from \"../domain\";\nimport { getValue } from \"../localStorage\";\nimport { locations, useRouter } from \"../routing\";\nimport { foldStatus, reducer, State } from \"./GameState\";\n\nexport function Game() {\n  const router = useRouter();\n\n  const [state, dispatch] = useReducer(\n    reducer,\n    pipe(\n      getValue(\"gameData\", GameData),\n      option.fold<GameData, State>(\n        constant({ view: \"selectPlayers\" }),\n        (gameData) => ({\n          view: \"init\",\n          gameData: gameData,\n        })\n      )\n    )\n  );\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\" alignItems=\"center\">\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"menu\"\n            onClick={() => router.navigateTo(locations.home)}\n          >\n            <ArrowBackSharp />\n          </IconButton>\n          <Box display=\"flex\" width={1}>\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"players\" />\n            </Typography>\n          </Box>\n        </Toolbar>\n      </AppBar>\n      <Box\n        display=\"flex\"\n        m={2}\n        width={1}\n        flexDirection=\"row\"\n        alignItems=\"center\"\n      >\n        {pipe(\n          state,\n          foldStatus({\n            whenInit: (gameData) => (\n              <ConfirmationDialog\n                open\n                title={<FormattedMessage id=\"game.resumeGame.title\" />}\n                content={<FormattedMessage id=\"game.resumeGame.content\" />}\n                onConfirm={() =>\n                  dispatch({ type: \"resumeGame\", payload: gameData })\n                }\n                onCancel={() => {\n                  localStorage.removeItem(\"gameData\");\n                  dispatch({ type: \"startFreshGame\" });\n                }}\n                confirmLabel=\"game.resumeGame.confirm\"\n                cancelLabel=\"game.resumeGame.cancel\"\n              />\n            ),\n            whenSelectPlayers: constant(\n              <SelectPlayers\n                onNext={(players) =>\n                  dispatch({ type: \"assignRoleToPlayer\", payload: players })\n                }\n              />\n            ),\n            whenShowRole: (playersData) => (\n              <ShowRole\n                playersData={playersData}\n                onStartGame={() => dispatch({ type: \"startNight\" })}\n              />\n            ),\n            whenNight: (playersData, nightNumber) => (\n              <Night\n                playersData={playersData}\n                nightNumber={nightNumber}\n                wolvesDoubleAttack={false}\n                onNightResult={(data) =>\n                  dispatch({ type: \"endNight\", payload: data })\n                }\n              />\n            ),\n            whenNightRecapAndDiscussion: (\n              playerKilled,\n              newsFromInn,\n              newsFromBard\n            ) => (\n              <NightRecapAndDiscussion\n                playerKilled={playerKilled}\n                newsFromInn={newsFromInn}\n                newsFromBard={newsFromBard}\n                onProceedWithVoting={() => {}}\n              />\n            ),\n          })\n        )}\n      </Box>\n    </Box>\n  );\n}\n","import { Box, Button, Grid, Typography } from \"@material-ui/core\";\nimport { FormattedMessage } from \"react-intl\";\nimport { locations, useRouter } from \"../routing\";\n\n//Bilanciamento ruoli 1 creatura oscura ogni 4 giocatori\n\nexport function Home() {\n  const router = useRouter();\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\" alignItems=\"center\">\n      <Typography variant=\"h1\">\n        <FormattedMessage id=\"appTitle\" />\n      </Typography>\n\n      <Box\n        mt={10}\n        width={1}\n        display=\"flex\"\n        alignItems=\"center\"\n        flexDirection=\"column\"\n      >\n        <Grid\n          container\n          item\n          xs={6}\n          direction=\"column\"\n          justifyContent=\"center\"\n          spacing={3}\n        >\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => router.navigateTo(locations.game)}\n              fullWidth\n            >\n              <FormattedMessage id=\"game\" />\n            </Button>\n          </Grid>\n\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => router.navigateTo(locations.roles)}\n              fullWidth\n            >\n              <FormattedMessage id=\"role\" />\n            </Button>\n          </Grid>\n\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => router.navigateTo(locations.players)}\n              fullWidth\n            >\n              <FormattedMessage id=\"players\" />\n            </Button>\n          </Grid>\n        </Grid>\n      </Box>\n    </Box>\n  );\n}\n","import {\n  Card,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Grid,\n  IconButton,\n  Typography,\n} from \"@material-ui/core\";\nimport { Player } from \"../domain\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { IO } from \"fp-ts//IO\";\nimport { useState } from \"react\";\nimport { ConfirmationDialog } from \"./Common/ConfirmationDialog\";\nimport { FormattedMessage } from \"react-intl\";\n\ntype Props = {\n  player: Player;\n  onDelete: IO<void>;\n};\n\nexport function PlayerCard(props: Props) {\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n\n  return (\n    <Grid item xs={6} sm={4} md={3} lg={2}>\n      <Card>\n        <CardMedia></CardMedia>\n        <CardContent>\n          <Typography gutterBottom variant=\"h5\">\n            {props.player.name}\n          </Typography>\n        </CardContent>\n        <CardActions disableSpacing>\n          <IconButton\n            aria-label=\"delete\"\n            onClick={() => setDeleteDialogOpen(true)}\n          >\n            <DeleteIcon />\n          </IconButton>\n        </CardActions>\n      </Card>\n      <ConfirmationDialog\n        open={deleteDialogOpen}\n        title={<FormattedMessage id=\"player.delete.confirmDialog.title\" />}\n        content={<FormattedMessage id=\"player.delete.confirmDialog.content\" />}\n        onConfirm={() => {\n          setDeleteDialogOpen(false);\n          props.onDelete();\n        }}\n        onCancel={() => setDeleteDialogOpen(false)}\n      />\n    </Grid>\n  );\n}\n","import { FieldProps } from \"@buildo/formo\";\nimport { TextField as InternalTextField } from \"@material-ui/core\";\nimport { nonEmptyArray, option } from \"fp-ts\";\nimport { pipe } from \"fp-ts/function\";\nimport { NonEmptyArray } from \"fp-ts/NonEmptyArray\";\n\ntype Props = FieldProps<string, string, NonEmptyArray<string>> & {\n  placeholder: string;\n};\n\nexport function TextField(props: Props) {\n  return (\n    <InternalTextField\n      fullWidth\n      label={props.label}\n      defaultValue={props.placeholder}\n      disabled={props.disabled}\n      onChange={(e) => props.onChange(e.currentTarget.value)}\n      onBlur={props.onBlur}\n      value={props.value}\n      name={props.name}\n      error={pipe(props.issues, option.isSome)}\n      helperText={pipe(\n        props.issues,\n        option.map((issues) => pipe(issues, nonEmptyArray.head)),\n        option.toNullable\n      )}\n    />\n  );\n}\n","import { useIntl } from \"react-intl\";\nimport { Validator, validators } from \"@buildo/formo\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { array, either, option } from \"fp-ts\";\nimport { NonEmptyString } from \"io-ts-types/NonEmptyString\";\n\nexport const nonBlankString = (\n  errorMessage: string\n): Validator<string, NonEmptyString, string> =>\n  validators.validator(\n    either.fromPredicate(\n      (s): s is NonEmptyString => s.trim().length > 0,\n      constant(errorMessage)\n    )\n  );\n\nexport const uniqueString =\n  (\n    errorMessage: string\n  ): ((\n    collection: NonEmptyString[]\n  ) => Validator<string, NonEmptyString, string>) =>\n  (collection: NonEmptyString[]) =>\n    validators.validator(\n      either.fromPredicate(\n        (s): s is NonEmptyString =>\n          pipe(\n            collection,\n            array.findFirst((p) => p === s),\n            option.isNone\n          ),\n        constant(errorMessage)\n      )\n    );\n\nexport function useValidators() {\n  const intl = useIntl();\n\n  const defined = <T>() =>\n    validators.defined<T, string>(\n      intl.formatMessage({ id: \"form.validators.defined\" })\n    );\n\n  const definedNoExtract = <T>() =>\n    validators.definedNoExtract<T, string>(\n      intl.formatMessage({ id: \"form.validators.defined\" })\n    );\n\n  const nonBlankStringInternal = nonBlankString(\n    intl.formatMessage({ id: \"form.validators.nonBlankString\" })\n  );\n\n  const uniqueStringInternal = uniqueString(\n    intl.formatMessage({ id: \"form.validators.uniqueString\" })\n  );\n\n  return {\n    nonBlankString: nonBlankStringInternal,\n    uniqueString: uniqueStringInternal,\n    defined,\n    definedNoExtract,\n  };\n}\n","import { useFormo, validators } from \"@buildo/formo\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from \"@material-ui/core\";\nimport { IO } from \"fp-ts/IO\";\nimport { Reader } from \"fp-ts/Reader\";\nimport { NonEmptyString } from \"io-ts-types/lib/NonEmptyString\";\nimport { FormattedMessage, useIntl } from \"react-intl\";\nimport { TextField } from \"../Form/TextField\";\nimport { useValidators } from \"../Form/validators\";\nimport { taskEither } from \"fp-ts\";\n\ntype Props = {\n  open: boolean;\n  title: string;\n  playerNames: NonEmptyString[];\n  onConfirm: Reader<NonEmptyString, void>;\n  onCancel: IO<void>;\n};\n\nexport function PlayerForm(props: Props) {\n  const { formatMessage } = useIntl();\n  const { nonBlankString, uniqueString } = useValidators();\n\n  const { fieldProps, handleSubmit } = useFormo(\n    {\n      initialValues: {\n        name: \"\",\n      },\n      fieldValidators: () => ({\n        name: validators.inParallel(\n          nonBlankString,\n          uniqueString(props.playerNames)\n        ),\n      }),\n    },\n    {\n      onSubmit: (values) =>\n        taskEither.fromIO(() => props.onConfirm(values.name)),\n    }\n  );\n\n  return (\n    <Dialog open={props.open} fullWidth onClose={props.onCancel}>\n      <DialogTitle>\n        <FormattedMessage id={props.title} />\n      </DialogTitle>\n      <DialogContent>\n        <TextField\n          label={formatMessage({\n            id: \"player.form.label.name\",\n          })}\n          placeholder=\"\"\n          {...fieldProps(\"name\")}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={props.onCancel} color=\"primary\">\n          <FormattedMessage id=\"cancel\" />\n        </Button>\n        <Button onClick={handleSubmit} color=\"primary\">\n          <FormattedMessage id=\"ok\" />\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import {\n  AppBar,\n  Box,\n  createStyles,\n  Fab,\n  Grid,\n  IconButton,\n  makeStyles,\n  Theme,\n  Toolbar,\n  Typography,\n} from \"@material-ui/core\";\nimport ArrowBackSharp from \"@material-ui/icons/ArrowBackSharp\";\nimport { FormattedMessage } from \"react-intl\";\nimport { Player } from \"../domain\";\nimport { locations, useRouter } from \"../routing\";\nimport { useLocalStorageState } from \"../useLocalStorageState\";\nimport * as t from \"io-ts\";\nimport { PlayerCard } from \"../blocks/PlayerCard\";\nimport { array } from \"fp-ts\";\nimport { pipe } from \"fp-ts/function\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { PlayerForm } from \"../blocks/PlayerForm\";\nimport { useState } from \"react\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    fab: {\n      position: \"absolute\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n    },\n  })\n);\n\nexport function Players() {\n  const classes = useStyles();\n  const router = useRouter();\n\n  const [players, setPlayers] = useLocalStorageState(\n    \"players\",\n    t.array(Player),\n    []\n  );\n\n  const [playerFormOpen, setPlayerFormOpen] = useState(false);\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\" alignItems=\"center\">\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"menu\"\n            onClick={() => router.navigateTo(locations.home)}\n          >\n            <ArrowBackSharp />\n          </IconButton>\n          <Box display=\"flex\" width={1}>\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"players\" />\n            </Typography>\n          </Box>\n        </Toolbar>\n      </AppBar>\n      <Box\n        display=\"flex\"\n        m={2}\n        width={1}\n        flexDirection=\"row\"\n        alignItems=\"center\"\n      >\n        <Grid\n          container\n          direction=\"row\"\n          spacing={2}\n          justifyContent=\"center\"\n          alignItems=\"center\"\n        >\n          {players.map((p) => (\n            <PlayerCard\n              player={p}\n              onDelete={() =>\n                setPlayers(\n                  pipe(\n                    players,\n                    array.filter((m) => m.name !== p.name)\n                  )\n                )\n              }\n            />\n          ))}\n        </Grid>\n        <Fab\n          color=\"primary\"\n          aria-label=\"add\"\n          className={classes.fab}\n          onClick={() => setPlayerFormOpen(true)}\n        >\n          <AddIcon />\n        </Fab>\n        {playerFormOpen && (\n          <PlayerForm\n            open={playerFormOpen}\n            title=\"player.form.label.title\"\n            playerNames={pipe(\n              players,\n              array.map((p) => p.name)\n            )}\n            onCancel={() => setPlayerFormOpen(false)}\n            onConfirm={(name) => {\n              setPlayers([...players, { name }]);\n              setPlayerFormOpen(false);\n            }}\n          />\n        )}\n      </Box>\n    </Box>\n  );\n}\n","import { either, option } from \"fp-ts\";\nimport { pipe } from \"fp-ts/function\";\nimport { Type } from \"io-ts\";\nimport { useState } from \"react\";\nimport { getValue, setValue } from \"./localStorage\";\n\nexport function useLocalStorageState<T, TT>(\n  key: string,\n  codec: Type<T, TT>,\n  value: T\n): [T, (value: T) => void] {\n  const initValues = pipe(\n    getValue(key, codec),\n    option.getOrElse(() => {\n      setValue(key, codec, value);\n      return value;\n    })\n  );\n\n  const [reactState, setReactState] = useState(initValues);\n\n  const setState = (value: T) =>\n    pipe(\n      setValue(key, codec, value),\n      either.fold(\n        () => {},\n        () => setReactState(value)\n      )\n    );\n\n  return [reactState, setState];\n}\n","import {\n  Accordion,\n  AccordionSummary,\n  AppBar,\n  Box,\n  Grid,\n  IconButton,\n  Toolbar,\n  Typography,\n} from \"@material-ui/core\";\nimport ArrowBackSharp from \"@material-ui/icons/ArrowBackSharp\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport { FormattedMessage } from \"react-intl\";\nimport { locations, useRouter } from \"../routing\";\nimport { Faction, factions, roles } from \"../domain\";\nimport { pipe } from \"fp-ts/function\";\nimport { array, record } from \"fp-ts\";\nimport { useFormatFaction } from \"../utils\";\nimport { RoleCard } from \"../blocks/RoleCard\";\n\nexport function Roles() {\n  const router = useRouter();\n  const formatFaction = useFormatFaction();\n\n  return (\n    <Box display=\"flex\" width={1} flexDirection=\"column\" alignItems=\"center\">\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"menu\"\n            onClick={() => router.navigateTo(locations.home)}\n          >\n            <ArrowBackSharp />\n          </IconButton>\n          <Box display=\"flex\" width={1}>\n            <Typography variant=\"h6\">\n              <FormattedMessage id=\"role\" />\n            </Typography>\n          </Box>\n        </Toolbar>\n      </AppBar>\n      <Box display=\"flex\" width={1} flexDirection=\"column\" alignItems=\"center\">\n        {pipe(\n          factions,\n          array.map((f: Faction) => (\n            <Accordion key={f}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{formatFaction(f)}</Typography>\n              </AccordionSummary>\n              <Box m={2}>\n                <Grid\n                  container\n                  direction=\"row\"\n                  spacing={2}\n                  justifyContent=\"center\"\n                  alignItems=\"center\"\n                >\n                  {pipe(\n                    roles,\n                    record.filter((r) => r.faction === f),\n                    record.toArray,\n                    array.map(([, r]) => (\n                      <Grid item xs={12} sm={6} md={4} lg={3}>\n                        <RoleCard key={r.id} role={r} />\n                      </Grid>\n                    ))\n                  )}\n                </Grid>\n              </Box>\n            </Accordion>\n          ))\n        )}\n      </Box>\n    </Box>\n  );\n}\n","import { pipe, constant } from \"fp-ts/function\";\nimport \"./App.css\";\nimport { useBuildConfigContext } from \"./ConfigProvider\";\nimport { Game } from \"./Pages/Game\";\nimport { Home } from \"./Pages/Home\";\nimport { Players } from \"./Pages/Players\";\nimport { Roles } from \"./Pages/Roles\";\nimport { foldLocation } from \"./Router/RouterProvider\";\nimport { RouterProvider, routing, useRouter } from \"./routing\";\n\nfunction InternalApp(): JSX.Element {\n  const router = useRouter();\n\n  return pipe(\n    router.current,\n    foldLocation({\n      Home: constant(<Home />),\n      Roles: constant(<Roles />),\n      Game: constant(<Game />),\n      Players: constant(<Players />),\n    })\n  );\n}\n\nfunction App(): JSX.Element {\n  const buildConfig = useBuildConfigContext();\n\n  return (\n    <RouterProvider\n      basepath={buildConfig.basepath}\n      useHashHistory\n      routing={routing}\n    >\n      <InternalApp />\n    </RouterProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { Box, CircularProgress } from \"@material-ui/core\";\n\nexport function Waiting() {\n  return (\n    <Box\n      display=\"flex\"\n      width={1}\n      height={1}\n      alignItems=\"center\"\n      justifyContent=\"center\"\n    >\n      <CircularProgress />\n    </Box>\n  );\n}\n","import { option, taskEither } from \"fp-ts\";\nimport { identity } from \"io-ts\";\nimport { useEffect, useState } from \"react\";\nimport { Option } from \"fp-ts/Option\";\nimport { constant, pipe } from \"fp-ts/function\";\nimport { IntlProvider as InternalIntlProvider } from \"react-intl\";\nimport { Waiting } from \"./blocks/Common/Waiting\";\n\ntype Locale = \"it\";\n\ntype Props = {\n  children: JSX.Element;\n  locale: Locale;\n};\n\nfunction loadLocaleData(locale: Locale) {\n  return taskEither.tryCatch(() => {\n    switch (locale) {\n      case \"it\":\n        return import(\"./messages/it.json\").then((messages) => ({\n          ...messages.default,\n        }));\n    }\n  }, identity);\n}\n\nexport function IntlProvider(props: Props) {\n  const [messages, setMessages] = useState<Option<Record<string, string>>>(\n    option.none\n  );\n\n  useEffect(() => {\n    pipe(\n      loadLocaleData(props.locale),\n      taskEither.map((messages) => setMessages(option.some(messages)))\n    )();\n  }, [props.locale]);\n\n  return pipe(\n    messages,\n    option.fold(constant(<Waiting />), (messages) => (\n      <InternalIntlProvider messages={messages} locale={props.locale}>\n        {props.children}\n      </InternalIntlProvider>\n    ))\n  );\n}\n","import { either } from \"fp-ts\";\nimport * as t from \"io-ts\";\nimport { pipe } from \"fp-ts/function\";\nimport { failure } from \"io-ts/lib/PathReporter\";\nimport { optionFromNullable } from \"io-ts-types/optionFromNullable\";\nimport { NonEmptyString } from \"io-ts-types/NonEmptyString\";\nimport { Option } from \"fp-ts/Option\";\n\nexport type BuildConfig = {\n  basepath: Option<NonEmptyString>;\n};\n\nconst BuildConfigCodec = t.type(\n  {\n    REACT_APP_BASEPATH: optionFromNullable(NonEmptyString),\n  },\n  \"BuildConfig\"\n);\n\nexport const buildConfig: BuildConfig = pipe(\n  BuildConfigCodec.decode(process.env),\n  either.fold(\n    (errors) => {\n      throw new Error(failure(errors).join(\"\\n\"));\n    },\n    (env): BuildConfig => ({\n      basepath: env.REACT_APP_BASEPATH,\n    })\n  )\n);\n","import ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { IntlProvider } from \"./IntlProvider\";\nimport { StrictMode } from \"react\";\nimport { BuildConfigProvider } from \"./ConfigProvider\";\nimport { buildConfig } from \"./config\";\n\nconst locale = \"it\";\n\nReactDOM.render(\n  <StrictMode>\n    <BuildConfigProvider {...buildConfig}>\n      <IntlProvider locale={locale}>\n        <App />\n      </IntlProvider>\n    </BuildConfigProvider>\n  </StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}